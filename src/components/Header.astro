---
import ThemeToggle from './ThemeToggle.astro';
import SearchBar from './SearchBar.astro';
import LoginButton from './LoginButton.astro';

const baseUrl = import.meta.env.BASE_URL;

const navLinks = [
  { href: `${baseUrl}roadmaps/`, label: 'roadmaps' },
  { href: `${baseUrl}#demo`, label: 'demo' },
  { href: `${baseUrl}#features`, label: 'features' },
  { href: 'https://github.com/Muhammad-Hazimi-Yusri/eee-roadmap', label: 'github', external: true },
];
---

<header class="header">
  <div class="container flex flex-wrap items-center justify-between gap-4">
    <!-- Logo -->
    <a href={baseUrl} class="header-logo flex items-center gap-3 no-underline" style="color: var(--color-text);">
      <svg class="w-8 h-8 flex-shrink-0" viewBox="0 0 32 32" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M2 16h5l2-6 4 12 4-12 4 12 2-6h7"/>
        <circle cx="2" cy="16" r="1.5" fill="currentColor"/>
        <circle cx="30" cy="16" r="1.5" fill="currentColor"/>
      </svg>
      <span class="font-mono text-lg font-bold">EEE Roadmap</span>
    </a>

    <!-- Navigation -->
    <nav class="flex flex-wrap items-center gap-x-6 gap-y-2" aria-label="Main navigation">
      {navLinks.map((link) => (
        <a 
          href={link.external ? link.href : link.href}
          class="font-mono text-sm lowercase"
          target={link.external ? '_blank' : undefined}
          rel={link.external ? 'noopener noreferrer' : undefined}
        >
          {link.label}
        </a>
      ))}
    </nav>
    
    <SearchBar />
    <div class="header-actions">
      <LoginButton />
      <ThemeToggle />
    </div>
  </div>
</header>

<style>
  .header {
    padding: 1.5rem 0;
    border-bottom: 2px solid var(--color-text);
  }

  /* Mobile portrait: move auth button to top right */
  @media (width <= 640px) {
    .header .container {
      position: relative;
    }

    .header :global(#auth-wrapper) {
      position: absolute;
      top: 0;
      right: 1rem;
    }

    .header-logo {
      margin-right: auto;
    }
  }


  /* Mobile portrait: expand search bar */
  @media (width <= 640px) {
    .header :global(.search-wrapper) {
      flex: 1;
    }

    .header :global(.search-trigger) {
      width: 100%;
    }

    /* Show full hint on mobile */
    .header :global(.search-hint) {
      display: inline;
    }

    .header :global(.search-trigger)::after {
      display: none;
    }
  }

  .header-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

</style>