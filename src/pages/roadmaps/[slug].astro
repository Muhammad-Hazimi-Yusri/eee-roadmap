---
// src/pages/roadmaps/[slug].astro

import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import Roadmap from '../../components/Roadmap.astro';
import { getRoadmap, getAllTracks } from '../../data';
import GlossaryTooltips from '../../components/GlossaryTooltips.astro';
import TrackGraph from '../../components/TrackGraph.astro';

export function getStaticPaths() {
  const tracks = getAllTracks();
  
  return tracks.map(({ slug, meta }) => ({
    params: { slug },
    props: { 
      title: meta.title, 
      description: meta.description 
    }
  }));
}

const { slug } = Astro.params;
const { title, description } = Astro.props;
---

<Layout title={title}>
  <Header />
  <main>
    <div class="container py-16">
      <p class="font-mono text-xs uppercase tracking-widest text-muted mb-2">
        // {slug} track
      </p>
      <h1 class="text-2xl sm:text-3xl mb-2">{title}</h1>
      <p class="max-w-xl text-muted mb-8">{description}</p>
      
      <Roadmap sections={getRoadmap(slug)} trackSlug={slug} />
    </div>
    
    <TrackGraph trackSlug={slug} />
  </main>
  <Footer />
  <GlossaryTooltips />
</Layout>