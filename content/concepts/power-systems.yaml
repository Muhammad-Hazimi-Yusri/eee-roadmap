# EEE Roadmap — Concept Library: power-systems
# Auto-generated by scripts/migrate-to-library.mjs — review and edit as needed.
# See CONTRIBUTING.md for the concept file format.
_meta:
  domain: power-systems
  description: Generation, transmission, distribution, and protection of electrical power systems
concepts:
  active-detection-methods:
    name: Active Detection Methods
    notes: |
      Inverter deliberately perturbs output to detect island:

      **Frequency shift:** Slight bias causes runaway if islanded

      **Reactive power variation:** Inject Q pulses, monitor V response

      **Impedance measurement:** Inject signal, measure grid impedance

      More reliable than passive methods but can interact between multiple inverters.
  active-power-p:
    name: Active Power (P)
    notes: |
      Real power doing useful work (motors, heating, lighting).

      **Units:** Watts (W, kW, MW)

      $$P = V \cdot I \cdot \cos(\phi)$$

      For three-phase:

      $$P_{3\phi} = \sqrt{3} \cdot V_{LL} \cdot I \cdot \cos(\phi)$$
  ansi-device-numbers:
    name: ANSI Device Numbers
    notes: |
      Standard numbering for protection functions:

      | Number | Function |
      |--------|----------|
      | 21 | Distance |
      | 25 | Synch check |
      | 27 | Undervoltage |
      | 50 | Instantaneous OC |
      | 51 | Time OC |
      | 59 | Overvoltage |
      | 67 | Directional OC |
      | 81 | Frequency |
      | 87 | Differential |

      Suffix letters: N=neutral, G=ground, T=transformer
  apparent-power-s:
    name: Apparent Power (S)
    notes: |
      Vector sum of P and Q - total power the system must deliver.

      **Units:** Volt-Amperes (VA, kVA, MVA)

      $$S = P + jQ$$

      $$|S| = \sqrt{P^2 + Q^2}$$
  applicability-limits:
    name: Applicability Limits
    notes: |
      IEEE 1584-2018 is valid for:

      | Parameter | Low Voltage | Medium Voltage |
      |-----------|------------|----------------|
      | Voltage | 208 V – 600 V | 601 V – 15 kV |
      | Bolted fault current | 500 A – 106 kA | 200 A – 65 kA |
      | Gap between conductors | 6.35 – 76.2 mm | 19.05 – 254 mm |
      | Working distance | ≥ 305 mm | ≥ 305 mm |

      Outside these limits, alternative methods (e.g., Lee method for >15 kV) must be used.
  applications:
    name: Applications
    notes: |
      - **Planning:** Assess new generation/transmission options
      - **Operations:** Real-time monitoring and control
      - **Contingency (N-1):** What if a line/generator trips?
      - **Voltage assessment:** Find weak points needing reactive support
      - **Loss calculation:** Optimize power flow paths
  arc-energy-reduction-nec-240-87:
    name: Arc Energy Reduction (NEC 240.87)
    notes: |
      NEC 240.87 mandates arc energy reduction for circuit breakers **≥1200 A**. Approved methods:

      1. **Zone-selective interlocking (ZSI):** Upstream device reduces delay when downstream device detects fault
      2. **Differential relaying:** Compares current in/out of protected zone
      3. **Energy-reducing maintenance switch:** Temporarily reduces trip delay for maintenance
      4. **Arc flash relays:** Detect arc light + overcurrent, initiate rapid trip (<50 ms)

      Arc flash relays are increasingly popular — they detect visible light from the arc and can reduce clearing time to **<35 ms**, dramatically cutting incident energy.
  arc-flash-boundary-afb:
    name: Arc Flash Boundary (AFB)
    notes: |
      The distance at which incident energy equals **1.2 cal/cm²** — the threshold for onset of second-degree burns on unprotected skin.

      AFB is calculated using the same IEEE 1584 equations but solving for distance rather than energy at a fixed distance.

      Typical AFB values:
      - Low voltage switchgear: 0.5–3 m
      - Medium voltage switchgear: 3–10+ m
      - Depends heavily on clearing time and fault current

      ![Arc flash hazard warning sign](https://commons.wikimedia.org/wiki/Special:FilePath/Warnzeichen_St%C3%B6rlichtbogen_-_Fehlerlichtbogen.svg)

      *Image: Arc flash hazard warning sign — Wikimedia Commons, Public Domain*
  arc-flash-safety:
    name: Arc Flash Safety
    notes: |
      Arc flash energy proportional to fault current and duration:

      $$E = I^{1.081} \times t \times k$$

      Higher fault level → higher incident energy → more PPE required.

      **IEEE 1584** standard requires fault study for arc flash assessment.
  arcing-current-calculation:
    name: Arcing Current Calculation
    notes: |
      Arcing current is derived from bolted fault current using empirically fitted polynomials:

      $$\lg(I_{arc}) = k_1 + k_2 \lg(I_{bf}) + k_3 [\lg(I_{bf})]^2 + \cdots$$

      Where coefficients vary by electrode configuration and voltage level.

      A critical improvement: the **variable arc current variation factor** replaces the fixed 15% reduction from the 2002 edition. Lower arcing currents at reduced voltage can cause:

      1. Longer protective device clearing times
      2. Potentially **higher** incident energy than full arcing current

      Software must calculate at both normal and minimum arcing current, reporting the **higher** value.
  backup-protection:
    name: Backup Protection
    notes: |
      **Local backup:** Duplicate protection within same zone
      - Same speed and selectivity as primary
      - Protects against relay/CT failure
      - Example: Dual main protections

      **Remote backup:** Protection from adjacent zones
      - Slower (time-delayed)
      - Less selective (trips more than necessary)
      - Example: Distance Zone 2/3, time-graded overcurrent
  balancing-mechanism:
    name: Balancing Mechanism
    notes: |
      **BM:** Real-time market for balancing

      **How it works:**
      1. Generators/suppliers submit bids and offers
      2. **Bid:** Price to reduce output (or increase demand)
      3. **Offer:** Price to increase output (or reduce demand)
      4. NESO accepts bids/offers to balance system
      5. Settled at bid/offer price (pay-as-bid)

      **Gate closure:** 1 hour before delivery

      **Imbalance price:** Cash-out for parties not in balance
  base-selection:
    name: Base Selection
    notes: |
      Choose two independent bases (typically):

      - $S_{base}$ = 100 MVA (industry standard)
      - $V_{base}$ = Nominal system voltage at each level

      **Derived bases:**

      $$I_{base} = \frac{S_{base}}{\sqrt{3} \cdot V_{base}}$$

      $$Z_{base} = \frac{V_{base}^2}{S_{base}}$$
  batch-contingency-analysis:
    name: Batch Contingency Analysis
    notes: |
      **Automated N-1 screening workflow:**
      ```
      1. Load base case, solve power flow
      2. Record pre-contingency state
      3. FOR each contingency (line/transformer/generator):
             Remove element
             Solve power flow
             Check thermal limits, voltage limits
             Record violations
             Restore element
      4. Rank contingencies by severity
      5. Report violations and critical contingencies
      ```

      **Typical result structure:**

      | Contingency | Worst Overload | Worst Voltage | Converged |
      |---|---|---|---|
      | Line A-B trip | Line C-D: 112% | Bus 7: 0.91 pu | Yes |
      | Transformer T1 | Line E-F: 105% | Bus 12: 0.88 pu | Yes |
      | Generator G3 | Line A-B: 98% | Bus 3: 0.93 pu | Yes |

      For large systems (1000+ contingencies), use
      PSS/E's built-in `accc` functions or PowerWorld's
      contingency analysis — far faster than Python loops.
  branch:
    name: Branch
    notes: |
      Circuit element connecting two nodes with impedance:

      $$Z = R + jX$$

      Examples: transmission lines, transformers, cables.
  branch-loading:
    name: Branch Loading
    notes: |
      Power flow as percentage of thermal rating:

      $$\text{Loading} = \frac{|S_{flow}|}{S_{rating}} \times 100\%$$

      **Watch for:**
      - \>80% - approaching limit, monitor closely
      - \>100% - overloaded, requires action

      Heavily loaded lines are **bottlenecks** limiting power transfer.
  breaker-failure-protection:
    name: Breaker Failure Protection
    notes: |
      What if the breaker doesn't open?

      **Breaker Failure (50BF):**
      1. Trip signal sent to breaker
      2. Timer starts (typically 150-200ms)
      3. If fault current still flowing → trip all adjacent breakers

      Last resort backup - isolates larger area but prevents catastrophic failure.
  breaking-and-thermal-currents:
    name: Breaking and Thermal Currents
    notes: |
      Beyond $I''_k$, IEC 60909 defines:

      - **Symmetrical breaking current** $I_b$: accounts for AC decay near generators (relevant for breaker interrupting rating)
      - **Thermal equivalent current** $I_{th}$: for equipment thermal withstand over fault duration

      $$I_{th} = I''_k \times \sqrt{m + n}$$

      Where $m$ accounts for DC component decay and $n$ for AC component decay.
  bus-types:
    name: Bus Types
    notes: |
      Each bus must be classified for the solver:

      | Type | Known | Unknown | Purpose |
      |------|-------|---------|---------|
      | **Slack** (Swing) | V, θ | P, Q | Reference bus, balances system |
      | **PV** (Generator) | P, V | Q, θ | Voltage-controlled generation |
      | **PQ** (Load) | P, Q | V, θ | Most buses - loads and fixed gen |

      Typically: 1 slack, few PV, many PQ buses.
  busbar:
    name: Busbar
    notes: |
      Non-impedant conductive bar serving as central power distribution point in substations.

      ![Busbar arrangement](https://commons.wikimedia.org/wiki/Special:FilePath/Non_sectional_system_of_busbar.svg)

      *Image: Wikimedia Commons, Public Domain*
  cable-construction:
    name: Cable Construction
    notes: |
      ![Cable cross-section](https://commons.wikimedia.org/wiki/Special:FilePath/Hochspannungskabel_400kV_Querschnitt.JPG)

      *Image: Wikimedia Commons, CC BY-SA 3.0*

      **Layers (inside out):**
      1. Conductor (copper or aluminium)
      2. Conductor screen
      3. Insulation (XLPE, EPR, or PVC)
      4. Insulation screen
      5. Metallic sheath/screen
      6. Outer sheath (PE or PVC)

      **Insulation temperature limits:**
      - XLPE: 90°C continuous, 250°C short-circuit
      - PVC: 70°C continuous
  cable-impedance:
    name: Cable Impedance
    notes: |
      Cables have **higher R/X ratio** than overhead lines.

      **Typical values at 50Hz:**

      | Cable | R (Ω/km) | X (Ω/km) | R/X |
      |-------|----------|----------|-----|
      | LV 185mm² | 0.164 | 0.073 | 2.2 |
      | 11kV 185mm² | 0.164 | 0.090 | 1.8 |
      | 33kV 300mm² | 0.060 | 0.110 | 0.5 |

      High R/X ratio means **voltage drop dominated by real power** at LV.
  capability-curve:
    name: Capability Curve
    notes: |
      ![Generator capability curve](https://commons.wikimedia.org/wiki/Special:FilePath/Capability_curve_with_minimum_power_level.svg)

      *Image: Wikimedia Commons, CC BY-SA 4.0*

      P-Q diagram showing operating limits:

      **Limits:**
      - **Right arc:** Armature current (MVA rating)
      - **Top arc:** Field current (over-excitation)
      - **Bottom curve:** Stator end heating (under-excitation)
      - **Vertical line:** Prime mover (MW limit)

      Generator can operate anywhere inside the curve.
  change-of-base:
    name: Change of Base
    notes: |
      Converting between different bases:

      $$Z_{pu,new} = Z_{pu,old} \cdot \frac{S_{base,new}}{S_{base,old}} \cdot \left(\frac{V_{base,old}}{V_{base,new}}\right)^2$$

      Used when combining equipment with different nameplate bases.
  common-symbols:
    name: Common Symbols
    notes: |
      | Symbol | Component |
      |--------|-----------|
      | Circle with ~ | Generator |
      | Two coils | Transformer |
      | Square with X | Circuit breaker |
      | Heavy horizontal line | Busbar |
  connection-equipment:
    name: Connection Equipment
    notes: |
      Typical DG connection includes:

      - **Inverter(s)** with protection settings
      - **LV switchboard** with metering
      - **Transformer** (if HV connection)
      - **HV switchgear** (ring main unit or circuit breaker)
      - **G99 protection relay** (interface protection)
      - **Metering** (import/export, half-hourly)
  connection-process:
    name: Connection Process
    notes: |
      **Steps to connect:**

      1. **Application:** Submit G99 form A to DNO
      2. **Assessment:** DNO studies impact (4-12 weeks)
      3. **Offer:** Connection offer with costs and timescales
      4. **Acceptance:** Sign agreement, pay charges
      5. **Design:** Detailed design and approval
      6. **Construction:** Install equipment
      7. **Commissioning:** Witness tests, settings verification
      8. **Energisation:** Final Operating Notification (FON)

      **Typical timescales:** 3-18 months depending on complexity
  connection-voltage-selection:
    name: Connection Voltage Selection
    notes: |
      Voltage level based on capacity:

      | Capacity | Typical Voltage | Connection |
      |----------|-----------------|------------|
      | <50 kW | 400V (LV) | Single premises |
      | 50kW - 1MW | 400V or 11kV | LV or HV feeder |
      | 1 - 10 MW | 11kV or 33kV | Primary substation |
      | 10 - 50 MW | 33kV or 132kV | BSP or GSP |
      | >50 MW | 132kV+ | Transmission |

      DNO specifies minimum connection voltage in offer.
  constraint-management:
    name: Constraint Management
    notes: |
      **Constraint:** When power flow exceeds line/transformer rating

      **Causes:**
      - High renewable output in weak areas
      - Outages reducing network capacity
      - Demand patterns

      **Actions:**
      - Re-dispatch generation (BM actions)
      - Curtail wind/solar
      - Intertrips (automatic post-fault)

      **Constraint costs:** £500M+ annually (growing with renewables)
  convergence:
    name: Convergence
    notes: |
      **Converged:** Mismatches below tolerance (typically 0.001 pu)

      **Divergence causes:**
      - Poor initial guess (use flat start: V=1.0, θ=0)
      - Excessive reactive demand
      - Islanded sections
      - Negative impedance (modelling error)
  coordination-challenges:
    name: Coordination Challenges
    notes: |
      **Parallel feeders:** Both see same fault current - need directional elements (67)

      **Ring networks:** Fault current from both directions - need directional or differential

      **DG infeed:** Changes fault current magnitude and direction

      **Motor contribution:** Adds to fault current, decays quickly
  coordination-on-tccs:
    name: Coordination on TCCs
    notes: |
      **Rules for proper coordination:**

      1. Downstream curve must be **below and left** of upstream
      2. Maintain CTI gap at all fault current levels
      3. Check at both minimum and maximum fault points

      **Crossover:** Where curves intersect = loss of coordination
  coordination-time-interval:
    name: Coordination Time Interval
    notes: |
      The grading margin (CTI) between series devices must account for:

      1. **Relay timing error** — ±5% for numerical, ±7.5% for electromechanical (at 2–5× pickup)
      2. **Overshoot time** — negligible for numerical, 0.05–0.1s for electromechanical
      3. **Circuit breaker opening time** — 0.04–0.08s modern, 0.1–0.15s older
      4. **CT errors** — ±3% typical, affects apparent current seen by relay

      **Resulting CTI values:**

      | Relay Combination | Typical CTI |
      |---|---|
      | Numerical ↔ Numerical | 0.2–0.3 s |
      | Numerical ↔ Electromechanical | 0.3–0.4 s |
      | Electromechanical ↔ Electromechanical | 0.4–0.5 s |

      **Grading procedure (load → source):**

      1. Set downstream device below equipment damage curve
      2. Calculate downstream operating time at maximum through-fault
      3. Add CTI to get required upstream time
      4. Solve for upstream TMS:

      $$TMS_{upstream} = \frac{(t_{downstream} + CTI) \times \left[\left(\frac{I}{I_s}\right)^\alpha - 1\right]}{k}$$

      5. Verify coordination holds at all intermediate fault levels
      6. Check for **crossover points** where curves intersect (loss of coordination)
  core-automation-pattern:
    name: Core Automation Pattern
    notes: |
      The fundamental pattern for batch studies:
      ```
      Load base case
      FOR each scenario:
          Apply modifications
          Solve power flow
          IF converged:
              Extract results
          ELSE:
              Log failure
          Restore base case
      END FOR
      Generate report
      ```

      **PSS/E example:**
      ```python
      results = {}
      for scenario in scenarios:
          psspy.case('base.sav')
          apply_modifications(scenario)
          ierr = psspy.fnsl()
          if ierr == 0:
              results[scenario] = extract_results()
      ```

      **Critical best practices:**
      - Always reload base case between scenarios
        (modifications are cumulative otherwise)
      - Check `ierr` return values — silent failures
        produce meaningless results
      - Log all actions for troubleshooting
      - Validate against manual GUI calculations
        before trusting batch results
  corrective-actions-and-scopf:
    name: Corrective Actions and SCOPF
    notes: |
      **Corrective actions for contingency violations:**

      1. **Generation redispatch** — shift power from
         constrained path to relieve overloads
      2. **Topology switching** — open/close breakers to
         redistribute flow
      3. **Reactive compensation** — switch capacitor banks,
         adjust SVCs/STATCOMs
      4. **Load shedding** — last resort, shed non-critical
         load to maintain system integrity

      **Remedial Action Schemes (RAS):**
      Automatic corrective actions triggered by specific
      contingencies:
      - Generator tripping
      - Controlled separation
      - HVDC power order changes
      - Automatic load shedding

      NERC defines RAS as "automatic protection systems
      designed to detect abnormal conditions and take
      corrective actions other than isolation of faulted
      components."

      **Security-Constrained Optimal Power Flow (SCOPF):**
      Optimises dispatch while respecting **both** pre-contingency
      and post-contingency constraints simultaneously:

      $$\min \sum C_i(P_{G,i})$$

      Subject to:
      - Pre-contingency power flow equations
      - Post-contingency flow limits for all credible N-1 cases
      - Generator limits, voltage limits

      Provides the most economically efficient dispatch
      that maintains N-1 security — the standard tool for
      real-time market operations and planning studies.
  critical-clearing-time:
    name: Critical Clearing Time
    notes: |
      **Critical clearing time (CCT)** is the maximum fault duration
      that maintains stability — protection must operate faster
      than CCT.

      **Typical CCT values:**

      | Fault Type | CCT Range |
      |---|---|
      | Three-phase fault at generator terminals | 100–200 ms |
      | Remote line-to-ground fault | 300–500+ ms |

      **Factors that increase CCT (improve stability):**
      - Higher machine inertia ($H$)
      - Lower pre-fault loading (larger stability margin)
      - Greater electrical distance to fault
      - Faster excitation systems
      - Higher post-fault transmission capacity (redundant lines)

      **Relationship to protection coordination:**
      The total fault clearing time comprises:
      - Relay operating time (20–40 ms for numerical relays)
      - Circuit breaker opening time (40–80 ms modern SF₆)
      - Total: typically 60–120 ms

      For a CCT of 150 ms, the **stability margin** is only
      30–90 ms — demonstrating why fast protection is critical
      for generator stability.

      **Study timeframe:**
      - First-swing stability: 3–5 seconds
      - Multi-swing (large interconnections): up to 20 seconds
      - Governor response (too slow for first swing): 0.5–2 seconds
  current-grading:
    name: Current Grading
    notes: |
      Use fault current magnitude differences to discriminate.

      Fault current decreases with distance from source due to line impedance.

      Set instantaneous elements (50) to see only close-in faults:

      $$I_{pickup} > I_{fault,downstream}$$

      **Limitation:** Doesn't work well on short feeders or where fault current doesn't vary much.
  current-rating-ampacity:
    name: Current Rating (Ampacity)
    notes: |
      Maximum continuous current limited by:
      - Conductor temperature
      - Insulation thermal limits
      - Heat dissipation (installation method)

      **Base rating** from manufacturer tables, then apply derating:

      $$I_{rated} = I_{base} \times K_1 \times K_2 \times K_3 \times K_4$$
  damage-curves:
    name: Damage Curves
    notes: |
      Equipment withstand limits plotted on same TCC:

      **Cable damage curve:**
      $$I^2 t = k$$
      Where k depends on conductor material and insulation

      **Transformer:** Inrush point and thermal damage

      **Motor:** Starting current and locked rotor time

      **Rule:** Protective device curve must be **left of** damage curve (faster operation).
  dc-power-flow-screening:
    name: DC Power Flow Screening
    notes: |
      DC screening enables rapid evaluation of thousands of
      contingencies using linear sensitivity factors.

      **Power Transfer Distribution Factors (PTDF):**
      Fraction of a transaction flowing on each line:

      $$PTDF_{l,i \to j} = \frac{\Delta P_l}{\Delta P_{transaction}}$$

      **Line Outage Distribution Factors (LODF):**
      Flow redistribution when line $k$ trips:

      $$LODF_{l,k} = \frac{\Delta P_l}{P_k^{pre}}$$

      **Post-contingency flow calculation:**

      $$P_l^{post} = P_l^{pre} + LODF_{l,k} \times P_k^{pre}$$

      This allows checking all N-1 cases without re-solving
      power flow for each contingency — extremely fast.

      **Performance index ranking:**

      $$PI = \sum \left(\frac{P_l}{P_l^{max}}\right)^{2n}$$

      Ranks contingencies by severity. Only the top-ranked
      (most severe) cases proceed to full AC analysis.
  dc-vs-ac-contingency-analysis:
    name: DC vs AC Contingency Analysis
    notes: |
      **DC power flow screening** is fast but approximate:
      - Assumes flat voltage profile (all buses 1.0 pu)
      - Ignores reactive power and losses
      - Good for thermal screening
      - Cannot detect voltage violations

      **Full AC contingency analysis** captures:
      - Voltage depression at load buses
      - Reactive power redistribution
      - Generator reactive limits (Q limits)
      - Tap changer response
      - Voltage stability concerns

      **Practical workflow:**
      1. DC screening: rank all N-1 contingencies by PI
      2. Select top 50–100 most severe cases
      3. Run full AC power flow for selected cases
      4. Check thermal, voltage, and stability criteria
      5. Identify violations and corrective actions
  demand-forecasting:
    name: Demand Forecasting
    notes: |
      NESO forecasts demand to plan generation:

      **Timescales:**
      - Week ahead: Unit commitment
      - Day ahead: Final schedules
      - Intraday: Adjustments
      - Real-time: Balancing actions

      **Factors:**
      - Weather (temperature, wind, solar)
      - Time of day/week/year
      - TV pickups (kettles at half-time!)
      - Bank holidays
      - COVID showed how much patterns can change
  derating-factors:
    name: Derating Factors
    notes: |
      | Factor | Description | Typical Range |
      |--------|-------------|---------------|
      | $K_1$ | Ambient temperature | 0.7 - 1.1 |
      | $K_2$ | Grouping (multiple cables) | 0.6 - 1.0 |
      | $K_3$ | Soil thermal resistivity | 0.8 - 1.0 |
      | $K_4$ | Depth of burial | 0.95 - 1.0 |

      **Example:** 400A base × 0.9 × 0.7 × 0.95 × 0.98 = 235A
  device-curves:
    name: Device Curves
    notes: |
      **Fuses:** Show as bands (two lines)
      - Left line: Minimum melting time
      - Right line: Total clearing time

      **Relays:** Show as single lines (adjustable)
      - Family of curves for different TMS settings

      **Breakers:** Vertical lines at:
      - Continuous rating
      - Instantaneous trip (if equipped)
  differential-protection-principles:
    name: Differential Protection Principles
    notes: |
      ![Relay symbols](https://commons.wikimedia.org/wiki/Special:FilePath/Relay_symbols.svg)

      *Image: Relay circuit symbols — Wikimedia Commons, Public Domain*

      Differential protection applies Kirchhoff's Current Law: under
      healthy conditions, current entering a protected zone equals
      current leaving. Any difference indicates an internal fault.

      $$I_{operate} = |I_{in} - I_{out}|$$

      **Key property:** 100% selective — only operates for faults
      within the zone boundary defined by CT locations.

      **Applications by ANSI device number:**
      - **87T** — Transformer differential
      - **87B** — Busbar differential
      - **87G** — Generator differential
      - **87M** — Motor differential
  differential-relays-87:
    name: Differential Relays (87)
    notes: |
      Compares current entering vs leaving protected zone.

      $$I_{operate} = |I_{in} - I_{out}|$$

      If difference exceeds threshold → internal fault → trip.

      **Key property:** 100% selective - only operates for internal faults

      **Applications:**
      - Transformer (87T)
      - Generator (87G)
      - Busbar (87B)
      - Motor (87M)
  discrimination-principle:
    name: Discrimination Principle
    notes: |
      **Goal:** Only the device closest to the fault should operate.

      If fault at point F:
      ```
      Source ──[A]──[B]──[C]── F ──[Load]
      ```

      Relay C should trip first. If C fails, B backs up. If B fails, A backs up.

      Achieved through **time grading** and/or **current grading**.
  distance-protection-zones:
    name: Distance Protection Zones
    notes: |
      ![Electrical substation](https://commons.wikimedia.org/wiki/Special:FilePath/Electrical_Substation.JPG)

      *Image: Electrical substation — Wtshymanski, Wikimedia Commons, Public Domain*

      Distance relays measure impedance to determine fault location.
      The apparent impedance during a fault:

      $$Z_{apparent} = \frac{V_{relay}}{I_{relay}}$$

      If $Z_{apparent}$ falls within the relay's operating characteristic
      (mho circle or quadrilateral), a trip is initiated.

      **Multi-zone reach settings:**

      | Zone | Reach | Timer | Purpose |
      |---|---|---|---|
      | Zone 1 | 80–85% of line $Z_L$ | Instantaneous | Primary protection, underreaches to avoid overtripping |
      | Zone 2 | 120–150% of line $Z_L$ | 0.3–0.5 s | Covers full line plus remote bus backup |
      | Zone 3 | Covers adjacent line | 1.0–1.5 s | Remote backup for adjacent line relays |

      **Why Zone 1 underreaches (80–85%):**
      - CT and VT measurement errors (±3% each)
      - Line impedance data uncertainty
      - Prevents unwanted instantaneous trip for faults beyond the remote bus

      **Zone 2 overlap coordination:**
      Zone 2 of line A overlaps with Zone 1 of line B at the remote bus.
      The time delay ensures the local Zone 1 relay trips first.
      If Zone 1 fails, Zone 2 provides time-delayed backup.
  distance-relay-characteristics:
    name: Distance Relay Characteristics
    notes: |
      **Mho (circular) characteristic:**
      - Inherently directional
      - Good reach along resistive and reactive axes
      - Traditional choice for transmission lines
      - Reach affected by fault resistance and load encroachment

      **Quadrilateral characteristic:**
      - Independent resistive and reactive reach settings
      - Better coverage of resistive faults (e.g., arcing faults, tower footing resistance)
      - Preferred for shorter lines and cable circuits
      - Requires separate directional element

      **Practical considerations:**
      - **Load encroachment:** Heavy load produces low apparent impedance that may enter Zone 3 — use load blinders or shaped characteristics
      - **Infeed effect:** Intermediate source current makes fault appear further away — Zone 2 reach must account for this
      - **Mutual coupling:** Zero-sequence mutual impedance between parallel lines affects ground distance elements — requires compensation factor

      **Coordination study methodology (complete):**

      1. Start at load end, set downstream devices below equipment damage curves
      2. Add grading margins progressively toward source
      3. Set distance Zone 1 to 80–85% of each line
      4. Set Zone 2 to cover full line with time delay
      5. Verify Zone 2 does not overreach into Zone 1 operating time of adjacent lines
      6. Set Zone 3 for remote backup with adequate delay
      7. Verify all settings under maximum and minimum fault conditions
      8. Check performance with and without infeed sources
  distance-relays-21:
    name: Distance Relays (21)
    notes: |
      Measures impedance (Z = V/I) to determine fault location.


      **Zones:**
      - **Zone 1:** 80-85% of line, instantaneous
      - **Zone 2:** 100-120% of line, ~0.3s delay
      - **Zone 3:** 150-200%, backup, ~1s delay

      **Application:** Transmission line protection
  distribution-network-operators-dnos:
    name: Distribution Network Operators (DNOs)
    notes: |
      Own and operate local distribution networks:

      | DNO Group | Operating Areas |
      |-----------|-----------------|
      | **UK Power Networks** | London, East, South East |
      | **National Grid ED** | Midlands, South West, South Wales |
      | **SP Energy Networks** | Merseyside, North Wales, Central/Southern Scotland |
      | **SSE Networks** | Northern Scotland, Southern England |
      | **Northern Powergrid** | North East, Yorkshire |
      | **Electricity North West** | North West England |

      **14 licensed DNO areas** across GB.

      Regulated under RIIO-ED2 price control.
  distribution-voltages:
    name: Distribution Voltages
    notes: |
      | Voltage | Name | Typical Use |
      |---------|------|-------------|
      | 132kV | EHV (E&W only) | Grid Supply Points, large industrial |
      | 33kV | HV | Primary distribution, bulk supply |
      | 11kV | HV | Secondary distribution, commercial |
      | 6.6kV | HV | Some older urban networks |
      | 400V | LV (3-phase) | Commercial, small industrial |
      | 230V | LV (1-phase) | Domestic consumers |

      **Note:** Some areas have 20kV or 22kV instead of 11kV.
  double-line-to-ground-llg:
    name: Double Line-to-Ground (LLG)
    notes: |
      Two phases short-circuited together and to ground.

      - **Severity:** Can exceed three-phase in some cases
      - **Frequency:** ~5-10% of faults
      - **Analysis:** Most complex - all sequences in parallel
  electrode-configurations:
    name: Electrode Configurations
    notes: |
      The 2018 revision introduced **five electrode configurations** based on over 1,800 arc flash tests (vs ~300 in 2002):

      | Config | Description | Relative Energy |
      |--------|-------------|-----------------|
      | VCB | Vertical conductors in box | Baseline |
      | VCBB | Vertical with insulating barrier | Lower |
      | HCB | Horizontal in box | **2–3× higher** |
      | VOA | Vertical open air | Lower |
      | HOA | Horizontal open air | Moderate |

      **HCB is worst-case** — arc plasma is directed toward the worker.

      ![Electric arc welding diagram](https://commons.wikimedia.org/wiki/Special:FilePath/Welding-electric-arc.svg)

      *Image: Electric arc diagram — Wikimedia Commons, CC BY-SA 3.0*
  engineering-recommendations-overview:
    name: Engineering Recommendations Overview
    notes: |
      **Engineering Recommendations (ERECs)** published by ENA:

      Industry-agreed technical standards for:
      - Generator connections (G-series)
      - Power quality (P-series)
      - Design and planning (various)

      **Not legally binding** but effectively mandatory via DNO connection agreements.
  equal-area-criterion:
    name: Equal Area Criterion
    notes: |
      The **equal area criterion (EAC)** provides graphical stability
      assessment for single-machine-infinite-bus (SMIB) systems
      without solving differential equations.

      For a lossless system, electrical power output follows the
      power-angle curve:

      $$P_e = P_{max} \sin\delta = \frac{|V_G||V_\infty|}{X} \sin\delta$$

      **When a fault occurs:**

      1. $P_e$ drops (possibly to zero for a bolted terminal fault)
         while $P_m$ continues → creates **accelerating area** $A_1$
      2. Rotor angle $\delta$ advances as rotor speeds up
      3. After fault clearing, $P_e > P_m$ → creates
         **decelerating area** $A_2$
      4. Stability requires $A_2 \geq A_1$ before $\delta$ exceeds
         $\delta_{max}$ on the post-fault curve

      $$A_1 = \int_{\delta_0}^{\delta_c} (P_m - P_{e,fault}) \, d\delta$$

      $$A_2 = \int_{\delta_c}^{\delta_{max}} (P_{e,post} - P_m) \, d\delta$$

      The **critical clearing angle** $\delta_{cr}$ is the maximum
      angle at which the fault can be cleared and still maintain
      $A_2 = A_1$. Beyond $\delta_{cr}$, synchronism is lost.

      **Key insight:** The system can remain stable even when
      $\delta > 90°$ during the transient swing — the 90° limit
      applies only to steady-state stability, not transient stability.
  equipment-rating:
    name: Equipment Rating
    notes: |
      All equipment must withstand fault conditions:

      | Equipment | Fault Rating Needed |
      |-----------|-------------------|
      | Circuit breakers | Breaking & making capacity |
      | Busbars | Short-time withstand (1-3 sec) |
      | Cables | Short-circuit rating |
      | CTs | Thermal & dynamic limits |

      **Under-rated equipment** can fail catastrophically during faults.
  excitation-and-reactive-power:
    name: Excitation and Reactive Power
    notes: |
      Field current controls reactive power output:

      **Over-excited:** High field current → exports Q → supports voltage

      **Under-excited:** Low field current → absorbs Q → may depress voltage

      **AVR (Automatic Voltage Regulator):**
      - Maintains terminal voltage setpoint
      - Adjusts field current automatically
      - Droop setting for load sharing
  fast-decoupled-method:
    name: Fast Decoupled Method
    notes: |
      Simplification of N-R exploiting natural decoupling:

      - **P-θ:** Real power strongly coupled to angles
      - **Q-V:** Reactive power strongly coupled to voltages

      Solves two smaller systems instead of one large one. Even faster for transmission networks.
  fault-current-contribution:
    name: Fault Current Contribution
    notes: |
      Generator fault current decays over time:

      $$I''_f = \frac{E''}{X''_d}$$ (sub-transient, first few cycles)

      $$I'_f = \frac{E'}{X'_d}$$ (transient, up to ~2 seconds)

      $$I_f = \frac{E}{X_d}$$ (steady-state, if fault sustained)

      **Typical contribution:** 4-6× rated current initially
  fault-level-definition:
    name: Fault Level Definition
    notes: |
      Maximum power (MVA) or current (kA) that flows during a fault at a given point.

      **Two expressions:**

      $$\text{Fault MVA} = \frac{S_{base}}{Z_{pu}}$$

      $$\text{Fault kA} = \frac{\text{Fault MVA}}{\sqrt{3} \times kV}$$
  fault-severity-ranking:
    name: Fault Severity Ranking
    notes: |
      For **solidly grounded** systems (typical UK distribution):

      $$I_{3\phi} > I_{SLG} > I_{LLG} > I_{LL}$$

      For **impedance grounded** systems:

      $$I_{3\phi} > I_{LLG} > I_{LL} > I_{SLG}$$

      Three-phase fault is usually used for **equipment rating** as it's the worst case.
  frequency-control:
    name: Frequency Control
    notes: |
      **Target:** 50.00 Hz ± 0.2 Hz (normal operating range)

      **Frequency rises** when generation > demand
      **Frequency falls** when demand > generation

      **Response services:**

      | Service | Speed | Duration |
      |---------|-------|----------|
      | Inertia | Instantaneous | Seconds |
      | Primary response | 10 seconds | 30 seconds |
      | Secondary response | 30 seconds | 30 minutes |
      | Tertiary / reserve | Minutes | Hours |

      NESO procures these services from generators and batteries.
  future-challenges:
    name: Future Challenges
    notes: |
      System operation becoming more complex:

      **Low inertia:**
      - Less synchronous generation
      - Faster frequency changes
      - Need for synthetic inertia from batteries/IBRs

      **Variable renewables:**
      - High instantaneous penetration (>70% at times)
      - Need for flexibility (storage, DSR, interconnectors)

      **Distributed resources:**
      - Millions of small generators/batteries
      - Visibility challenge for NESO
      - Local vs national balancing
  g100-export-limiting:
    name: G100 - Export Limiting
    notes: |
      **G100:** Technical requirements for export limiting schemes

      Allows connection where network capacity limited:
      - **ANM (Active Network Management):** Real-time curtailment
      - **Export limiting:** Fixed maximum export
      - **Timed connections:** Export only at certain times

      Enables more DG without costly reinforcement.
  g5-harmonics:
    name: G5 - Harmonics
    notes: |
      **G5/4-1:** Planning levels for harmonic voltage distortion

      **THD (Total Harmonic Distortion):**

      $$THD = \frac{\sqrt{\sum_{h=2}^{40} V_h^2}}{V_1} \times 100\%$$

      **Planning limits (% of fundamental):**

      | Voltage | THD | Individual (odd) |
      |---------|-----|------------------|
      | LV | 5% | 4-5% |
      | MV (11-33kV) | 4% | 3-4% |
      | HV (132kV) | 3% | 2-3% |

      **Causes:** Power electronics, VFDs, rectifiers, LED lighting
  g99-generator-connections:
    name: G99 - Generator Connections
    notes: |
      **G99:** Requirements for connection of generation equipment

      Replaced G59 (large) and G83 (small) in April 2019.

      **Scope:** All generation 0.8kW to 50MW connecting at <110kV

      **Key requirements:**
      - Frequency and voltage ride-through
      - Reactive capability
      - Protection settings (LoM, over/under V & f)
      - Compliance process and testing

      See earlier topic on G99 for details.
  g99-overview:
    name: G99 Overview
    notes: |
      **Engineering Recommendation G99** (replaced G59 in 2019)

      Aligns UK with EU Requirements for Generators (RfG).

      Applies to all new generation connecting to distribution networks (up to 132kV).

      **Key document:** ENA Engineering Recommendation G99
  gauss-seidel-method:
    name: Gauss-Seidel Method
    notes: |
      Sequential update of each bus voltage:

      $$V_i^{(k+1)} = \frac{1}{Y_{ii}} \left[ \frac{P_i - jQ_i}{V_i^{(k)*}} - \sum_{j \neq i} Y_{ij} V_j^{(k)} \right]$$

      **Pros:** Simple to understand and code

      **Cons:** Slow (100+ iterations), poor convergence for large/meshed networks

      **Use:** Small systems, educational purposes
  gb-system-overview:
    name: GB System Overview
    notes: |
      ![UK National Grid map](https://commons.wikimedia.org/wiki/Special:FilePath/Map_of_the_National_Grid_in_Great_Britain.svg)

      *Image: Wikimedia Commons, CC BY-SA 3.0*

      Great Britain has a **unified synchronous grid** covering England, Wales, and Scotland.

      Northern Ireland is part of the all-island Irish system (connected via HVDC).

      **Key principle:** Separation of system operation from asset ownership.
  generator-classification:
    name: Generator Classification
    notes: |
      Based on capacity and connection voltage:

      | Type | Capacity | Voltage | Requirements |
      |------|----------|---------|--------------|
      | A | 0.8kW - 1MW | <110kV | Basic |
      | B | 1 - 10 MW | <110kV | Intermediate |
      | C | 10 - 50 MW | <110kV | Advanced |
      | D | ≥50 MW or ≥110kV | Any | Full compliance |

      Higher types have more onerous requirements.
  generator-control-modes:
    name: Generator Control Modes
    notes: |
      In load flow analysis:

      **PV mode (voltage control):**
      - P and V specified
      - Q calculated (within limits)
      - Normal operation

      **PQ mode (fixed output):**
      - P and Q both specified
      - V calculated
      - Used when at reactive limit

      **Slack bus:**
      - V and θ specified (reference)
      - P and Q calculated
      - Balances system losses
  generator-reactances:
    name: Generator Reactances
    notes: |
      Multiple reactances for different timescales:

      | Reactance | Symbol | Typical (pu) | Timescale |
      |-----------|--------|--------------|-----------|
      | Sub-transient | $X''_d$ | 0.1-0.25 | 0-50ms |
      | Transient | $X'_d$ | 0.15-0.35 | 50ms-2s |
      | Synchronous | $X_d$ | 1.0-2.5 | Steady-state |

      **Fault studies use $X''_d$** for maximum (initial) fault current.
  grading-margin-calculation:
    name: Grading Margin Calculation
    notes: |
      For IDMT relays, check coordination at **maximum fault current** through both devices:

      1. Calculate downstream relay time at max fault
      2. Add CTI (0.3-0.5s)
      3. Calculate upstream TMS to achieve this time

      $$TMS_{upstream} = \frac{(t_{downstream} + CTI) \times ((I/I_s)^\alpha - 1)}{k}$$
  harmonic-effects-on-equipment:
    name: Harmonic Effects on Equipment
    notes: |
      **Transformers:**
      - Increased eddy current losses: $P_{ec,h} = P_{ec,1} \times h^2$
      - Increased stray losses in structural parts
      - K-factor rating quantifies harmonic heating:

      $$K = \sum_{h=1}^{H} \left(\frac{I_h}{I_1}\right)^2 \times h^2$$

      K-factor rated transformers (K-4, K-13, K-20, K-30)
      are designed for harmonic-rich loads without derating.

      **Cables:**
      - Skin effect increases AC resistance at harmonic
        frequencies: $R_{ac,h} \approx R_{dc} \times \sqrt{h}$
      - Proximity effect further increases losses
      - Triplen harmonics (3rd, 9th, 15th) add in neutral
        conductor — neutral may carry **up to 1.73× phase
        current** with single-phase nonlinear loads

      **Rotating machines:**
      - Negative-sequence harmonics (5th, 11th) create
        reverse-rotating fields causing torque pulsations
      - Rotor heating from induced harmonic currents
      - Audible noise and vibration

      **Capacitors:**
      - Current increases with frequency: $I_h = h \times \omega C \times V_h$
      - Risk of thermal overload and dielectric failure
      - IEEE Std 18 limits: 135% of rated current,
        110% of rated voltage, 135% of rated kvar
  harmonic-penetration-study-method:
    name: Harmonic Penetration Study Method
    notes: |
      Harmonic penetration uses **current injection** where
      nonlinear loads are modelled as ideal current sources
      injecting their characteristic spectrum:

      $$[V]_h = [Z]_h \times [I]_h$$

      Harmonic voltages from harmonic currents and network
      impedance at each frequency $h$.

      **Frequency-dependent component modelling:**

      | Component | Impedance at Harmonic $h$ |
      |---|---|
      | Inductor | $X_{L,h} = h \times X_{L,1}$ |
      | Capacitor | $X_{C,h} = X_{C,1} / h$ |
      | Resistor (skin effect) | $R_h \approx R_1 \times \sqrt{h}$ |
      | Transformer | Leakage reactance × $h$, with frequency-dependent losses |

      **Transformer winding connections** affect harmonic
      propagation — **delta windings block triplen harmonics**
      (3rd, 9th, 15th) from passing between voltage levels.

      This is why distribution transformers are commonly
      Dyn11 — the delta primary traps triplen currents.
  harmonic-sources-and-spectra:
    name: Harmonic Sources and Spectra
    notes: |
      ![3-phase AC waveform](https://commons.wikimedia.org/wiki/Special:FilePath/3_phase_AC_waveform.svg)

      *Image: Three-phase AC waveform (fundamental) — Wikimedia Commons*

      Harmonics are sinusoidal components at integer multiples
      of the fundamental frequency (50/60 Hz), originating
      from **nonlinear loads** that draw non-sinusoidal current.

      **Six-pulse rectifier** characteristic harmonics at
      orders $h = 6k \pm 1$ (where $k = 1, 2, 3, \ldots$):

      | Harmonic Order | Frequency (50 Hz) | Typical Magnitude |
      |---|---|---|
      | 5th | 250 Hz | 20% of fundamental |
      | 7th | 350 Hz | 14% |
      | 11th | 550 Hz | 9% |
      | 13th | 650 Hz | 8% |
      | 17th | 850 Hz | 5% |
      | 19th | 950 Hz | 4% |

      Without mitigation, six-pulse drives produce
      **THDi of 80–100%**.

      **Higher pulse configurations:**

      | Configuration | Cancelled Harmonics | Typical THDi |
      |---|---|---|
      | 6-pulse + 3% reactor | — (reduced magnitudes) | 30–40% |
      | 12-pulse | 5th, 7th | 10–15% |
      | 18-pulse | 5th, 7th, 11th, 13th | 3–5% |
      | Active front end (AFE) | All significant | < 3% |
  idmt-characteristics:
    name: IDMT Characteristics
    notes: |
      Inverse Definite Minimum Time curves:

      ![Time-current characteristic](https://commons.wikimedia.org/wiki/Special:FilePath/Standard_Trip_Characteristic_of_a_Thermomagnetic_Circuit_Breaker.svg)

      *Image: Wikimedia Commons, CC BY-SA 4.0*

      $$t = \frac{TMS \times k}{(I/I_s)^\alpha - 1}$$

      Where:
      - TMS = Time Multiplier Setting
      - $I_s$ = Pick-up current setting
      - k, α = curve constants

      | Curve | k | α |
      |-------|---|---|
      | Standard Inverse (SI) | 0.14 | 0.02 |
      | Very Inverse (VI) | 13.5 | 1.0 |
      | Extremely Inverse (EI) | 80 | 2.0 |

      **VI/EI** used where fault current varies significantly with location.
  iec-60255-standard-inverse-curves:
    name: IEC 60255 Standard Inverse Curves
    notes: |
      ![Protective relay panel](https://commons.wikimedia.org/wiki/Special:FilePath/Protective_Relays_Hydroelectric_Station.JPG)

      *Image: Electromechanical protective relays — Wtshymanski, Wikimedia Commons, CC BY-SA 3.0*

      The general IEC 60255 inverse-time equation:

      $$t = TMS \times \frac{k}{\left(\frac{I}{I_s}\right)^\alpha - 1}$$

      where $t$ is operating time, $TMS$ is the time multiplier setting,
      $I$ is fault current, $I_s$ is pickup current, and $k$, $\alpha$ are
      curve constants.

      **Standard curve types and their constants:**

      | Curve Type | k | α | Application |
      |---|---|---|---|
      | Standard Inverse (SI) | 0.14 | 0.02 | General purpose |
      | Very Inverse (VI) | 13.5 | 1.0 | Variable fault current with distance |
      | Extremely Inverse (EI) | 80.0 | 2.0 | Motor starting, fuse coordination |

      The IEEE C37.112 formulation uses a slightly different structure:

      $$t = TD \times \left(\frac{A}{\left(\frac{I}{I_s}\right)^p - 1} + B\right)$$

      **Curve selection guidance:**
      - **SI:** Fault current does not vary much across the network
      - **VI:** Significant impedance between relay locations changes fault magnitude
      - **EI:** Need to coordinate with fuse curves or ride through motor starting current
  ieee-421-5-excitation-models:
    name: IEEE 421.5 Excitation Models
    notes: |
      ![Electrical substation](https://commons.wikimedia.org/wiki/Special:FilePath/Electrical_Substation.JPG)

      *Image: Electrical substation — Wtshymanski, Wikimedia Commons, Public Domain*

      **IEEE Std 421.5-2016** defines standard models for
      excitation systems used in stability studies. Key model types:

      | Model | Type | Description |
      |---|---|---|
      | ST1A | Static (thyristor) | Fast response, fed from generator terminals or auxiliary bus |
      | AC4A | Alternator-rectifier | Rotating AC exciter with controlled rectifier |
      | DC1A | DC commutator | Older rotating DC exciter, slower response |

      **Static excitation (ST1A) advantages:**
      - Very fast forcing capability (ceiling voltage in <0.1s)
      - High initial response ratio
      - Improves first-swing transient stability
      - Can provide both positive and negative field forcing

      **Limitation:** Static exciters depend on generator terminal
      voltage — during close-in faults, terminal voltage collapses
      and exciter output is reduced precisely when it's needed most.

      **Automatic Voltage Regulator (AVR) impact on stability:**
      - Fast AVR improves **first-swing stability** by maintaining
        field flux and thus electrical power output during faults
      - However, high-gain AVR can reduce **damping** of
        subsequent oscillations — this is where PSS is essential
  impact-of-distributed-generation:
    name: Impact of Distributed Generation
    notes: |
      Adding DG increases fault levels:

      - **Synchronous generators:** Contribute 4-6× rated current
      - **Inverter-based (solar/wind):** Limited to 1.1-1.5× rated

      Existing equipment may become under-rated when DG added.

      **Re-assessment required** for any new generation connection.
  impedance-correction-factors:
    name: Impedance Correction Factors
    notes: |
      Key difference from ANSI: IEC applies correction factors to component impedances.

      **Transformer correction:**

      $$K_T = \frac{0.95 \times c_{max}}{1 + 0.6 \times x_T}$$

      **Generator correction:**

      $$K_G = \frac{U_n}{U_{rG}} \times \frac{c_{max}}{1 + x''_d \times \sin\varphi_{rG}}$$

      These corrections make IEC results **5–10% higher** than ANSI — critical when mixing equipment rated to different standards.
  incident-energy-and-arc-duration:
    name: Incident Energy and Arc Duration
    notes: |
      The fundamental relationship:

      **Incident energy is directly proportional to arc duration.**

      Arc duration = protective device clearing time at the calculated arcing current.

      $$E \propto t_{arc}$$

      Reducing clearing time from 500 ms to 50 ms reduces incident energy by **~90%**.

      **Worst-case scenario:** If arcing current falls on an inverse-time curve, reduced current → longer clearing time → potentially higher incident energy. This is why IEEE 1584 requires dual calculations.
  initial-symmetrical-short-circuit-current:
    name: Initial Symmetrical Short-Circuit Current
    notes: |
      The RMS value at fault inception:

      $$I''_k = \frac{c \times U_n}{\sqrt{3} \times Z_k}$$

      Where:
      - $c$ = voltage factor
      - $U_n$ = nominal system voltage
      - $Z_k$ = positive-sequence impedance at fault location
  interface-points:
    name: Interface Points
    notes: |
      **Grid Supply Point (GSP):**
      - Transmission to distribution interface
      - 400kV/275kV → 132kV (or 33kV in some areas)
      - Metering point for settlement

      **Bulk Supply Point (BSP):**
      - 132kV → 33kV transformation
      - Feeds multiple primary substations

      **Primary Substation:**
      - 33kV → 11kV transformation
      - Feeds HV distribution network

      **Secondary Substation (Distribution):**
      - 11kV → 400V transformation
      - Pole-mounted or ground-mounted
      - Feeds LV network to consumers
  interface-protection-panel:
    name: Interface Protection Panel
    notes: |
      G99-compliant protection relay provides:

      - Voltage and frequency protection (27, 59, 81)
      - RoCoF protection (df/dt)
      - Intertrip receive (from DNO)
      - Status monitoring and event logging

      **Must be type-tested** to G99 requirements.

      Common manufacturers: Woodward, Schneider, ABB, Siemens
  inverter-based-resources-ibr:
    name: Inverter-Based Resources (IBR)
    notes: |
      Key differences from synchronous machines:

      | Aspect | Synchronous | Inverter |
      |--------|-------------|----------|
      | Inertia | Yes (rotating mass) | No (virtual possible) |
      | Fault current | 4-6× rated | 1.1-1.5× rated |
      | Frequency response | Inherent | Programmed |
      | Reactive capability | Full range | Limited by rating |

      **Grid-forming vs Grid-following:**
      - Grid-following: Needs grid voltage reference
      - Grid-forming: Can establish voltage/frequency (emerging)
  islanding-hazards:
    name: Islanding Hazards
    notes: |
      **Safety:**
      - Network assumed dead may be live
      - Risk to personnel working on "isolated" network
      - Public contact with downed conductors

      **Equipment:**
      - Poor power quality (voltage/frequency drift)
      - Out-of-phase reclosing (severe damage)
      - Fault clearance failure (no grid fault current)

      **Requirement:** Disconnect within **2 seconds** of island forming.
  key-technical-requirements:
    name: Key Technical Requirements
    notes: |
      **Frequency response:**
      - LFSM-O: Reduce output above 50.4Hz
      - LFSM-U: Maintain output down to 47.5Hz
      - FSM: Optional fast frequency response

      **Voltage ride-through:**
      - Must stay connected during voltage dips
      - Type-dependent duration and depth

      **Reactive capability:**
      - Power factor range (typically 0.95 lag to 0.95 lead)
      - Voltage control modes

      **Protection settings:**
      - Over/under frequency and voltage
      - Rate of Change of Frequency (RoCoF)
      - Vector shift (Loss of Mains)
  kirchhoffs-laws:
    name: Kirchhoff's Laws
    notes: |
      **KCL (Current Law):** Sum of currents entering a node equals sum leaving.

      **KVL (Voltage Law):** Sum of voltages around any closed loop equals zero.
  leading-vs-lagging:
    name: Leading vs Lagging
    notes: |
      Describes current relative to voltage:

      - **Lagging PF:** Current lags voltage (inductive loads - motors)
      - **Leading PF:** Current leads voltage (capacitive loads)

      **Memory aid:** ELI the ICE man
      - **ELI:** Voltage (E) leads Current (I) in Inductors (L)
      - **ICE:** Current (I) leads Voltage (E) in Capacitors (C)
  line-construction:
    name: Line Construction
    notes: |
      ![Transmission tower](https://commons.wikimedia.org/wiki/Special:FilePath/Crossing_electricity_pylon_330_kV_01.jpg)

      *Image: Wikimedia Commons, CC BY-SA 4.0*

      **Conductor types:**
      - ACSR: Aluminium Conductor Steel Reinforced
      - AAAC: All Aluminium Alloy Conductor
      - HTLS: High Temperature Low Sag (for uprating)

      **Typical spans:** 
      - Distribution: 50-150m
      - Transmission: 300-500m
  line-impedance:
    name: Line Impedance
    notes: |
      Overhead lines have **lower R/X ratio** than cables.

      **Typical values (per km):**

      | Line | R (Ω/km) | X (Ω/km) | R/X |
      |------|----------|----------|-----|
      | 11kV distribution | 0.3 | 0.35 | 0.9 |
      | 33kV | 0.12 | 0.38 | 0.3 |
      | 132kV | 0.06 | 0.40 | 0.15 |
      | 400kV | 0.03 | 0.32 | 0.1 |

      Higher X due to wider conductor spacing (air insulation).
  line-to-line-fault-ll:
    name: Line-to-Line Fault (LL)
    notes: |
      Two phases short-circuited together (not involving ground).

      - **Severity:** ~87% of three-phase fault current
      - **Frequency:** ~15-20% of faults
      - **Analysis:** Positive and negative sequence networks in parallel
  load-flow-purpose:
    name: Load Flow Purpose
    notes: |
      Answers the question: "Given generation and load, what are the voltages and power flows?"

      **Calculates:**
      - Voltage magnitude and angle at each bus
      - Real and reactive power flow in each branch
      - System losses
      - Equipment loading (% of rating)
  locked-rotor-current-characteristics:
    name: Locked-Rotor Current Characteristics
    notes: |
      ![Stator and rotor of an electric motor](https://commons.wikimedia.org/wiki/Special:FilePath/Stator_and_rotor_by_Zureks.JPG)

      *Image: Stator and rotor — Wikimedia Commons, CC BY-SA 3.0*

      At standstill, an induction motor has no back-EMF, producing
      **locked-rotor currents of 5–8 times full-load amperes (FLA)**
      that persist for 5–30 seconds during acceleration.

      This current flows at a severely lagging power factor
      (10–25%), imposing both real and reactive power demands.

      **NEMA code letters** specify starting kVA per horsepower.
      Code G (most common) indicates 5.6–6.29 kVA/HP:

      $$kVA_{start} = \text{Code Letter} \times HP$$

      A 500 HP motor at Code G may draw **over 3000 kVA
      during starting** — potentially exceeding the transformer
      or generator rating at the supply bus.

      **Torque-speed relationship during acceleration:**
      - At standstill: high current, low power factor, moderate torque
      - During acceleration: current decreases as back-EMF develops
      - Near full speed: current drops to normal FLA, slip typically 2–5%
  making-vs-breaking-current:
    name: Making vs Breaking Current
    notes: |
      **Making current:** Peak asymmetrical (first half-cycle)

      $$I_{peak} = I_{sym} \times \sqrt{2} \times (1 + e^{-\frac{R}{X}\pi})$$

      **Breaking current:** RMS symmetrical (after few cycles)

      Circuit breakers rated for both values.
  mesh-topology:
    name: Mesh Topology
    notes: |
      Multiple interconnections creating redundant paths.

      **Pros:** Highest reliability, load sharing
      **Cons:** Complex protection, highest cost
      **Use:** Transmission networks, critical industrial loads
  mitigation-strategies:
    name: Mitigation Strategies
    notes: |
      **Passive single-tuned filter design:**
      - Tuned slightly below target harmonic (e.g., 4.7th for 5th)
      - Provides low impedance path to divert harmonic current
      - Also supplies reactive power at fundamental frequency
      - Risk: can attract harmonics from elsewhere in the system
      - Must be designed considering system impedance variations

      **Filter tuning calculation:**

      $$f_{tune} = \frac{1}{2\pi\sqrt{LC}}$$

      Quality factor $Q = X_L / R$ determines sharpness
      of tuning (typical Q = 30–60 for power filters).

      **Other mitigation approaches:**

      | Strategy | Effectiveness | Cost |
      |---|---|---|
      | Line reactors (3–5%) | THDi: 80% → 35% | Low |
      | 12-pulse rectifier | THDi: 10–15% | Medium |
      | 18-pulse rectifier | THDi: 3–5% | Medium-High |
      | Passive tuned filter | Targets specific harmonics | Medium |
      | Active filter (STATCOM) | Broadband, adaptive | High |
      | Hybrid (passive + active) | Best overall performance | Highest |

      **Design sequence for harmonic study:**
      1. Model system with all nonlinear loads as current sources
      2. Perform frequency scan — identify resonance risks
      3. Check IEEE 519 compliance at PCC without mitigation
      4. If non-compliant: apply mitigation and re-check
      5. Verify capacitor duty (IEEE Std 18) and transformer K-factor
      6. Check sensitivity to system impedance variations (±10% typical)
  mva-method:
    name: MVA Method
    notes: |
      Quick calculation without per-unit conversion:

      **Series impedances:** $\frac{1}{MVA_{total}} = \frac{1}{MVA_1} + \frac{1}{MVA_2}$

      **Parallel sources:** $MVA_{total} = MVA_1 + MVA_2$

      **Example:** 
      - Grid infeed: 500 MVA
      - Transformer: 10% on 20 MVA base → $\frac{20}{0.1} = 200$ MVA

      $$\frac{1}{MVA_f} = \frac{1}{500} + \frac{1}{200}$$

      $$MVA_f = 143 \text{ MVA}$$
  n-1-criterion-and-reliability-standards:
    name: N-1 Criterion and Reliability Standards
    notes: |
      ![Transmission lines](https://commons.wikimedia.org/wiki/Special:FilePath/Transmission_Lines_at_Sunset.jpg)

      *Image: Transmission lines — Wikimedia Commons*

      The **N-1 criterion** requires that power systems withstand
      loss of any single major component — transmission line,
      transformer, or generator — without violating:
      - Thermal limits
      - Voltage limits
      - Stability constraints

      **Extended criteria:**

      | Criterion | Description | Application |
      |---|---|---|
      | N-1 | Loss of any single element | Standard planning/operations |
      | N-1-1 | Second contingency after system adjustment | Planning studies |
      | N-2 | Simultaneous loss of two elements | Common-mode failures (double-circuit towers) |

      **Regulatory frameworks:**
      - **NERC TPL-001-5.1** (North America): Transmission
        planning requirements for Category B (N-1) and
        Category C (N-1-1) events
      - **ENTSO-E System Operation Guideline** (EU 2017/1485):
        European transmission security standards
  national-energy-system-operator-neso:
    name: National Energy System Operator (NESO)
    notes: |
      **NESO** (formerly National Grid ESO, separated October 2024)

      **Role:** Balances supply and demand in real-time

      **Responsibilities:**
      - Frequency control (maintain 50Hz ± 0.5Hz)
      - Voltage management
      - Constraint management
      - Balancing mechanism operation
      - Future Energy Scenarios (FES)
      - Network planning and connections

      **Not an asset owner** - operates the system impartially.
  newton-raphson-method:
    name: Newton-Raphson Method
    notes: |
      Solves power mismatch equations using Jacobian matrix:

      $$\begin{bmatrix} \Delta P \\ \Delta Q \end{bmatrix} = \mathbf{J} \begin{bmatrix} \Delta \theta \\ \Delta V \end{bmatrix}$$

      **Jacobian structure:**

      $$\mathbf{J} = \begin{bmatrix} \frac{\partial P}{\partial \theta} & \frac{\partial P}{\partial V} \\ \frac{\partial Q}{\partial \theta} & \frac{\partial Q}{\partial V} \end{bmatrix}$$

      **Pros:** Fast (3-5 iterations), robust, industry standard

      **Cons:** More complex, requires Jacobian calculation
  nfpa-70e-ppe-categories:
    name: NFPA 70E PPE Categories
    notes: |
      NFPA 70E translates IEEE 1584 incident energy into PPE categories:

      | Category | Max Incident Energy | Typical PPE |
      |----------|-------------------|-------------|
      | 1 | 4 cal/cm² | Arc-rated shirt + pants, safety glasses |
      | 2 | 8 cal/cm² | Arc-rated coveralls, face shield |
      | 3 | 25 cal/cm² | Arc flash suit, hood |
      | 4 | 40 cal/cm² | Multi-layer arc flash suit |
      | **>40 cal/cm²** | — | **No standard PPE rated** |

      Above 40 cal/cm², engineering controls are mandatory: de-energisation, remote operation, or arc energy reduction.

      ![Electrical substation equipment](https://commons.wikimedia.org/wiki/Special:FilePath/Electrical_Substation.JPG)

      *Image: Electrical substation — Wikimedia Commons, CC BY 2.0*
  node-bus:
    name: Node (Bus)
    notes: |
      Common connection point where circuit elements meet, characterized by voltage phasor.

      In power systems, each node has:
      - Voltage magnitude $|V|$
      - Voltage angle $\theta$
  nominal-vs-declared-voltage:
    name: Nominal vs Declared Voltage
    notes: |
      **Nominal voltage:** System design voltage (e.g., 11kV, 400V)

      **Declared voltage:** What supplier declares to customers
      - LV: 230V (was 240V until 1995 harmonisation)
      - Tolerance: +10% / -6% (216V to 253V)

      **Historical note:** UK moved from 240V ±6% to 230V +10%/-6%, effectively the same range but aligned with European standard.
  ohl-vs-cable-comparison:
    name: OHL vs Cable Comparison
    notes: |
      | Aspect | Overhead Line | Cable |
      |--------|---------------|-------|
      | Capital cost | Lower (5-10×) | Higher |
      | Maintenance | Higher | Lower |
      | Visual impact | High | None |
      | Reliability | Weather-affected | Protected |
      | Fault rate | Higher | Lower |
      | Repair time | Faster | Slower |
      | Reactive power | Generates (line charging) | Consumes |
      | Urban use | Limited | Preferred |
  other-key-standards:
    name: Other Key Standards
    notes: |
      **Security standards:**
      - **SQSS:** Security and Quality of Supply Standard (transmission)
      - **P2/6:** Security of supply (distribution) - being replaced by P2/8

      **Design standards:**
      - **BS 7671:** Wiring Regulations (LV installations)
      - **ENA TS 41-24:** Guidelines for LV connections

      **Grid codes:**
      - **Grid Code:** Transmission-connected parties
      - **Distribution Code:** Distribution-connected parties
      - **CUSC:** Connection and Use of System Code
  overcurrent-relays-50-51:
    name: Overcurrent Relays (50/51)
    notes: |
      Trips when current exceeds a threshold.

      **50 - Instantaneous:** Fixed time, high pickup
      - Typically set to see close-in faults only
      - Operates in 20-50 ms

      **51 - Time Overcurrent:** Inverse time characteristic
      - Higher current = faster operation
      - Allows coordination with downstream devices

      **Application:** Distribution networks, motor protection, backup protection
  p28-voltage-fluctuations:
    name: P28 - Voltage Fluctuations
    notes: |
      **P28:** Planning limits for voltage fluctuations

      **Flicker:** Rapid voltage variations causing visible light flicker

      **Limits:**
      - Short-term severity $P_{st} \leq 1.0$
      - Long-term severity $P_{lt} \leq 0.8$
      - Step changes $\leq 3\%$ (frequent) or 6% (infrequent)

      **Causes:** Motor starting, arc furnaces, wind turbines

      **Assessment:** Required for large loads or generation connections
  p29-voltage-unbalance:
    name: P29 - Voltage Unbalance
    notes: |
      **P29:** Planning limits for voltage unbalance

      **Unbalance:** Difference between phase voltages

      $$\text{VUF} = \frac{V_2}{V_1} \times 100\%$$

      Where $V_2$ = negative sequence, $V_1$ = positive sequence

      **Limits:**
      - Planning level: 1.3%
      - Compatibility level: 2.0%

      **Causes:** Single-phase loads, unbalanced three-phase loads
  parallel-operation:
    name: Parallel Operation
    notes: |
      Transformers in parallel must have:

      1. **Same vector group** (or compatible: Dy1 with Dy1)
      2. **Same voltage ratio** (within tap range)
      3. **Similar impedance** (within 10% for load sharing)

      Mismatched vector groups → circulating currents → overheating
  passive-detection-methods:
    name: Passive Detection Methods
    notes: |
      Detect abnormal conditions caused by islanding:

      | Method | Setting | Notes |
      |--------|---------|-------|
      | Under-voltage (27) | 0.8 pu | 0.5s delay |
      | Over-voltage (59) | 1.1 pu | 1.0s delay |
      | Under-frequency (81U) | 47.5 Hz | 0.5s delay |
      | Over-frequency (81O) | 52 Hz | 0.5s delay |
      | RoCoF (81R) | 1.0 Hz/s | 0.5s delay |
      | Vector Shift (VS) | 6° | Instantaneous |

      **Limitation:** May not detect balanced island (generation = load).
  peak-current-ip:
    name: Peak Current (ip)
    notes: |
      Accounts for DC offset (worst-case asymmetry):

      $$i_p = \kappa \times \sqrt{2} \times I''_k$$

      The kappa factor:

      $$\kappa = 1.02 + 0.98 \times e^{-3R/X}$$

      Ranges from **1.1** (high R/X) to **2.0** (low R/X, near generators).

      ![Short-circuit current waveform showing DC offset](https://commons.wikimedia.org/wiki/Special:FilePath/Short_Circuit_Current.svg)

      *Image: Short-circuit current waveform with DC offset — Wikimedia Commons, Public Domain*
  per-unit-basics:
    name: Per-Unit Basics
    notes: |
      Quantities expressed as dimensionless fractions of base values:

      $$X_{pu} = \frac{X_{actual}}{X_{base}}$$

      **Advantages:**
      - Transformer impedances same on both sides
      - Equipment values fall in narrow range (0.05-0.15 pu)
      - Simplifies hand calculations
  per-unit-conversion:
    name: Per-Unit Conversion
    notes: |
      Converting actual impedance to per-unit:

      $$Z_{pu} = Z_{actual} \cdot \frac{S_{base}}{V_{base}^2}$$

      **Example:** 10 Ω line at 11 kV on 100 MVA base

      $$Z_{base} = \frac{11^2}{100} = 1.21 \text{ Ω}$$

      $$Z_{pu} = \frac{10}{1.21} = 8.26 \text{ pu}$$
  per-unit-method:
    name: Per-Unit Method
    notes: |
      For three-phase fault at a bus:

      $$I_f (pu) = \frac{V_{pre-fault}}{Z_{total}}$$

      Usually assume $V_{pre-fault} = 1.0$ pu.

      **Example:** If total impedance to fault = 0.1 pu:

      $$I_f = \frac{1.0}{0.1} = 10 \text{ pu}$$
  power-factor-correction:
    name: Power Factor Correction
    notes: |
      Adding capacitors to cancel inductive reactive power:

      $$Q_C = P \cdot (\tan\phi_1 - \tan\phi_2)$$

      Where:
      - $\phi_1$ = original PF angle
      - $\phi_2$ = target PF angle

      **Target:** PF > 0.95 to avoid utility penalties
  power-factor-definition:
    name: Power Factor Definition
    notes: |
      Ratio of real power to apparent power:

      $$PF = \frac{P}{S} = \cos(\phi)$$

      - **PF = 1.0** (unity): Pure resistive, V and I in phase
      - **PF = 0**: Pure reactive, no real power transferred
      - **Typical industrial:** 0.7 - 0.9 lagging
  power-system-stabilizer:
    name: Power System Stabilizer
    notes: |
      A **Power System Stabilizer (PSS)** adds supplementary damping
      to electromechanical oscillations by modulating the excitation
      system output.

      **Operating principle:**
      The PSS detects rotor speed deviations and applies a
      compensating signal to the AVR voltage reference. When the
      rotor accelerates, PSS reduces excitation (reducing electrical
      torque), and vice versa — providing a **damping torque**
      component in phase with speed deviation.

      **PSS2B (dual-input stabilizer):**
      Uses both electrical power and shaft speed as inputs:
      - Speed signal: direct measure of rotor oscillation
      - Power signal: provides better transient response
      - Combination gives robust performance across operating conditions

      **Tuning methodology:**
      1. Identify electromechanical oscillation modes (typically 0.2–2.0 Hz)
         - **Local modes:** 1.0–2.0 Hz (single machine against system)
         - **Inter-area modes:** 0.2–0.8 Hz (groups of machines oscillating)
      2. Set PSS phase compensation to provide damping torque at modal frequencies
      3. Adjust gain for adequate damping without excessive AVR interaction
      4. Verify with eigenvalue analysis (all modes positively damped)

      **Design trade-off:**
      - Too much PSS gain → excessive voltage variation during disturbances
      - Too little PSS gain → insufficient damping, sustained oscillations
      - Typical target: damping ratio $\zeta > 5\%$ for all electromechanical modes
  power-triangle:
    name: Power Triangle
    notes: |
      Graphical representation relating P, Q, and S:
      ![Power triangle](https://commons.wikimedia.org/wiki/Special:FilePath/Power_Triangle_01.svg)

      *Image: Wikimedia Commons, CC BY-SA 3.0*

      - Horizontal: Active power P
      - Vertical: Reactive power Q  
      - Hypotenuse: Apparent power S
      - Angle φ: Power factor angle
  powerworld-and-other-apis:
    name: PowerWorld and Other APIs
    notes: |
      **PowerWorld SimAuto / ESA:**

      The ESA (Easy SimAuto) library wraps the COM interface
      and returns results as pandas DataFrames:
      ```python
      from esa import SAW
      saw = SAW('case.pwb')
      bus_data = saw.GetParametersSingleElement(
          'bus', ['BusNum', 'BusNomVolt', 'BusPUVolt'], [1])
      ```

      **DIgSILENT PowerFactory:**
      ```python
      import powerfactory as pf
      app = pf.GetApplication()
      project = app.ActivateProject('MyProject')
      ldf = app.GetFromStudyCase('ComLdf')
      ldf.Execute()  # run load flow
      ```

      Supports both DPL (internal language) and
      comprehensive Python API.

      **ETAP:**
      RESTful APIs through ETAP DataHub with `etapPy`
      client, enabling local and distributed execution.

      **Open-source alternative — pandapower:**
      ```python
      import pandapower as pp
      import pandapower.networks as pn
      net = pn.case9()
      pp.runpp(net)
      print(net.res_bus)  # voltage results
      ```

      Complete Python-native environment — excellent
      for learning before moving to commercial tools.
  primary-protection:
    name: Primary Protection
    notes: |
      First line of defense for a zone.

      **Characteristics:**
      - Fast operation (instantaneous or Zone 1)
      - Highly selective (only for internal faults)
      - Examples: Differential (87), Distance Zone 1 (21)

      Should clear ~90% of faults.
  protection-chain:
    name: Protection Chain
    notes: |
      Fault → CT/VT detect → Relay processes → Trip signal → Breaker opens

      **Typical times:**
      - Relay operation: 20-40 ms
      - Breaker operation: 40-80 ms
      - Total clearance: 60-120 ms (transmission)
      - Distribution: up to 500 ms+ (for coordination)
  protection-design:
    name: Protection Design
    notes: |
      Relay settings require accurate fault currents:

      - **Pick-up settings:** Must detect minimum fault current
      - **Time grading:** Based on fault magnitude variation
      - **Reach settings:** Distance relays need accurate impedances

      Wrong fault data = wrong protection = nuisance trips or failure to operate.
  protection-system-components:
    name: Protection System Components
    notes: |
      ![Protection relay panel](https://commons.wikimedia.org/wiki/Special:FilePath/Protective_Relays_Hydroelectric_Station.JPG)

      *Image: Wtshymanski, Wikimedia Commons, CC BY-SA 3.0*

      **CT (Current Transformer):** Measures current, isolates relay from HV

      **VT (Voltage Transformer):** Measures voltage, provides isolation

      **Relay:** Processes CT/VT signals, makes trip decision

      **Circuit Breaker:** Interrupts fault current

      **DC Supply:** Battery-backed power for relays and trip coils
  pss-e-python-integration:
    name: PSS/E Python Integration
    notes: |
      ![Electrical substation model](https://commons.wikimedia.org/wiki/Special:FilePath/Electrical_substation_model_(side-view).PNG)

      *Image: Electrical substation model — Wikimedia Commons*

      **PSS/E (Siemens PTI)** provides the `psspy` module,
      the industry-standard power system simulation API.

      **Initialisation:**
      ```python
      import psse35
      import psspy
      psspy.psseinit(150000)  # max buses
      ```

      **Core functions:**

      | Function | Purpose |
      |---|---|
      | `psspy.case('file.sav')` | Load saved case |
      | `psspy.fnsl()` | Newton-Raphson power flow |
      | `psspy.accc_parallel_2()` | Contingency analysis |
      | `psspy.abusreal()` | Get bus voltage data |
      | `psspy.aflowreal()` | Get branch flow data |

      All functions return `ierr` (integer error code).
      **Always check:** `ierr == 0` means success.

      One documented case achieved **2,544 power flow
      simulations** using PSS/E automation — weeks of
      manual effort completed in hours.
  purpose-of-protection:
    name: Purpose of Protection
    notes: |
      Detect abnormal conditions and isolate faulted equipment to:

      - **Protect people** from electric shock and arc flash
      - **Limit equipment damage** by clearing faults quickly
      - **Maintain system stability** by preventing cascade failures
      - **Minimize outage extent** by isolating only faulted section
  r-x-ratio-effect:
    name: R/X Ratio Effect
    notes: |
      | Network | R/X Ratio | Dominant Factor |
      |---------|-----------|-----------------|
      | LV (400V) | 2-5 | Active power (P) |
      | 11kV | 1-2 | Both P and Q |
      | 33kV | 0.3-0.5 | Reactive power (Q) |
      | 132kV | 0.1-0.2 | Reactive power (Q) |

      **Key insight:** At LV, voltage rise mainly from **real power** export.

      Reactive power absorption has limited effect on LV voltage.
  radial-topology:
    name: Radial Topology
    notes: |
      Tree-shaped network with single path from source to consumer.

      **Pros:** Simple, lowest cost, easy protection
      **Cons:** No redundancy - single fault causes outage
      **Use:** Rural areas, residential distribution
  reactive-power-flow:
    name: Reactive Power Flow
    notes: |
      Shows where Q is generated and consumed.

      **Key observations:**
      - Generators at Q limits? May need more reactive support
      - Long lines consuming Q? Consider series compensation
      - Transformers with high Q flow? Check tap positions
  reactive-power-q:
    name: Reactive Power (Q)
    notes: |
      Power that oscillates between source and load, maintaining magnetic/electric fields.

      **Units:** Volt-Amperes Reactive (VAR, kVAR, MVAR)

      $$Q = V \cdot I \cdot \sin(\phi)$$

      - **Inductors** (motors, transformers): Consume Q (lagging)
      - **Capacitors**: Supply Q (leading)
  reading-convention:
    name: Reading Convention
    notes: |
      Standard approach:
      1. Start at top (highest voltage)
      2. Work down to lowest voltage
      3. Left-to-right for same voltage level
  regulatory-framework:
    name: Regulatory Framework
    notes: |
      **Ofgem:** Independent regulator
      - Sets price controls (allowed revenues)
      - Enforces licence conditions
      - Protects consumer interests

      **ELEXON:** Settlement body
      - Balancing and Settlement Code (BSC)
      - Calculates imbalance charges

      **Energy Networks Association (ENA):**
      - Industry body for network operators
      - Publishes Engineering Recommendations (G99, P28, etc.)
  report-generation-and-best-practices:
    name: Report Generation and Best Practices
    notes: |
      **Automated reporting with Python ecosystem:**

      | Library | Purpose |
      |---|---|
      | pandas | Data manipulation, pivot tables |
      | matplotlib / plotly | Voltage profiles, loading charts |
      | openpyxl | Excel output with formatting |
      | fpdf / reportlab | PDF report generation |
      | Jinja2 | HTML report templates |

      **Typical report outputs:**
      - Voltage profile plots (pre/post-contingency)
      - Branch loading bar charts (sorted by severity)
      - Summary tables of all violations
      - Sensitivity curves (loading vs parameter)

      **Engineering best practices:**

      1. **Version control** — Git for all scripts,
         track changes alongside model versions
      2. **Error handling** — wrap all API calls in
         try/except, log failures with context
      3. **Validation** — compare automated results
         against manual GUI runs for a subset of cases
      4. **Documentation** — docstrings explaining
         study purpose, assumptions, and limitations
      5. **Reproducibility** — save input parameters,
         random seeds, and software version with results
      6. **Modular design** — separate data input,
         simulation engine, and reporting into distinct
         modules for reuse across studies
  resonance-with-capacitor-banks:
    name: Resonance with Capacitor Banks
    notes: |
      ![Electrical substation](https://commons.wikimedia.org/wiki/Special:FilePath/Electrical_Substation.JPG)

      *Image: Electrical substation with capacitor banks — Wikimedia Commons*

      The critical concern is **resonance between system
      inductance and power factor correction capacitors**.

      **Parallel resonance** creates high impedance at the
      resonant frequency, amplifying even small harmonic
      currents into large voltage distortion.

      The resonant harmonic order:

      $$h_r \approx \sqrt{\frac{MVA_{SC}}{MVAr_{cap}}}$$

      **Example:** 20 MVA short-circuit system with 2 MVAr
      capacitor bank: $h_r = \sqrt{20/2} = 3.2$ — dangerously
      close to the 3rd harmonic.

      **Series resonance** creates low impedance paths that
      can sink excessive harmonic currents into filters or
      capacitors, potentially causing thermal overload.

      **Frequency scanning analysis:**
      - Plots driving-point impedance vs frequency
      - Peaks indicate parallel resonance (high Z)
      - Valleys indicate series resonance (low Z)
      - Critical check: resonant peaks must not coincide
        with characteristic harmonic frequencies
  results-table-example:
    name: Results Table Example
    notes: |
      Typical load flow output:

      | Bus | V (pu) | θ (°) | P (MW) | Q (MVAR) |
      |-----|--------|-------|--------|----------|
      | 1 (Slack) | 1.000 | 0.0 | 150.2 | 45.3 |
      | 2 (PV) | 1.020 | -2.1 | 80.0 | 23.1 |
      | 3 (PQ) | 0.985 | -4.5 | -50.0 | -20.0 |

      Negative P/Q = load consuming power
  ring-topology:
    name: Ring Topology
    notes: |
      Closed loop providing two alternative paths.

      Can be operated as:
      - **Open ring:** One point normally open (like two radials)
      - **Closed ring:** Full loop energized (better reliability)

      **Use:** Urban distribution, commercial areas
  sag-and-clearance:
    name: Sag and Clearance
    notes: |
      Conductor sag increases with:
      - Temperature (thermal expansion)
      - Current (resistive heating)
      - Ice loading (weight)

      **Sag formula (parabolic approximation):**

      $$S = \frac{wL^2}{8T}$$

      Where:
      - w = weight per unit length
      - L = span length
      - T = conductor tension

      **Clearance requirements** (to ground, buildings, other lines) set maximum allowable sag.
  selectivity-mechanisms:
    name: Selectivity Mechanisms
    notes: |
      Four mechanisms achieve selective fault isolation:

      **1. Current grading (instantaneous elements, ANSI 50)**
      - Downstream devices see higher fault current due to source impedance
      - Set pickup above maximum downstream fault: $I_{pickup} > I_{fault,downstream}$
      - Limitation: ineffective on short feeders where fault current varies little

      **2. Time grading (IDMT elements, ANSI 51)**
      - Upstream devices have progressively longer delays
      - Works universally but accumulates delay toward source

      **3. Energy-based selectivity (I²t)**
      - Compare let-through energy of downstream fuse/breaker
      - Upstream device must not operate before downstream clears

      **4. Zone-selective interlocking (ZSI)**
      - Direct communication between devices via control wiring
      - Downstream device signals upstream: "I see the fault, wait"
      - If no restraint signal → upstream trips instantaneously (close-in fault)
      - Dramatically reduces arc flash energy at upstream locations
  sensitivity-and-monte-carlo-studies:
    name: Sensitivity and Monte Carlo Studies
    notes: |
      **Sensitivity analysis** — sweep one parameter
      while holding others constant:
      ```
      FOR load_level in [80%, 90%, 100%, 110%, 120%]:
          Scale all loads to load_level
          Solve power flow
          Record: voltages, line loadings, losses
      ```

      Produces curves showing how outputs vary with
      the swept parameter — essential for identifying
      critical thresholds and operating margins.

      **Monte Carlo simulation** — sample from
      probability distributions:
      ```
      FOR trial in range(N_trials):
          Sample: load (normal dist), generation
                  (availability), line status (outage rate)
          Apply sampled values
          Solve power flow
          Record outcomes (violations, losses, etc.)
      ```

      Produces probability distributions of outcomes:
      - P(voltage violation) at each bus
      - Expected annual overload hours per line
      - Loss distribution under uncertainty

      Typically requires **1,000–10,000 trials** for
      stable statistics — only practical with automation.
  sequence-network-connections:
    name: Sequence Network Connections
    notes: |
      Unbalanced faults are solved using symmetrical components:

      **Line-to-earth fault** (most common, ~70% of faults):

      $$I''_{k1} = \frac{\sqrt{3} \times c \times U_n}{Z_1 + Z_2 + Z_0}$$

      Series connection of all three sequence networks.

      **Line-to-line fault:**

      $$I''_{k2} = \frac{c \times U_n}{Z_1 + Z_2}$$

      No zero-sequence involvement.

      ![Symmetrical components diagram](https://commons.wikimedia.org/wiki/Special:FilePath/Symmetrical_components_three_phase.svg)

      *Image: Symmetrical components — Wikimedia Commons, CC BY-SA 4.0*
  sequential-starting-strategy:
    name: Sequential Starting Strategy
    notes: |
      When multiple large motors must start on the same system,
      **sequential starting with 30–60 second delays** between
      starts allows voltage recovery before each subsequent start.

      **Study approach:**

      1. **Static analysis (snapshot)** — calculates voltage at
         the instant of starting, assumes worst-case locked-rotor
         impedance. Quick screening tool.

      2. **Dynamic analysis (time-domain)** — simulates the
         complete acceleration transient including:
         - Motor torque-speed curve vs load torque curve
         - Generator excitation response and voltage recovery
         - Governor response for frequency dip
         - Interaction between motors already running and the starting motor

      **Key checks in dynamic study:**
      - Motor accelerates to full speed (torque exceeds load at all speeds)
      - Voltage recovers above 90% within acceptable time
      - Running motors do not stall during the voltage dip
      - Frequency does not drop below 95% on island systems
  single-line-to-ground-slg:
    name: Single Line-to-Ground (SLG)
    notes: |
      One phase contacts ground.

      - **Severity:** Depends on grounding (can exceed 3-phase in solidly grounded systems)
      - **Frequency:** Most common (~70-80% of faults)
      - **Analysis:** Requires all three sequence networks in series

      Common causes: Lightning, tree contact, insulator flashover
  sld-purpose:
    name: SLD Purpose
    notes: |
      Simplified representation showing three-phase system as single line.

      **Why simplify?** Three phases are balanced in normal operation, so one line represents all three.

      ![Example SLD](https://commons.wikimedia.org/wiki/Special:FilePath/One-line_diagram.svg)

      *Image: Wikimedia Commons, CC BY-SA 3.0*
  soft-starters-and-vfds:
    name: Soft Starters and VFDs
    notes: |
      **Soft starters (thyristor phase-angle control):**
      - Adjustable voltage ramp from reduced voltage to full voltage
      - Current limiting typically settable from 150–600% FLA
      - Provides smooth, controlled acceleration without current transients
      - Can include soft-stop (voltage ramp-down) for pump applications
      - Limitation: reduced voltage means reduced torque — not suitable for high-inertia loads requiring full torque from standstill

      **Variable Frequency Drives (VFDs):**
      - Starting current typically **only 100–150% FLA**
      - Maintains **full torque capability from zero speed**
      - Controlled V/Hz operation keeps flux constant during acceleration
      - Most sophisticated and expensive solution
      - Additional benefits: energy savings at partial load, precise speed control

      **Comparative summary:**

      | Method | Line Current | Torque | Cost | Best For |
      |---|---|---|---|---|
      | DOL | 100% (5–8× FLA) | 100% | Lowest | Small motors, stiff systems |
      | Star-delta | 33% | 33% | Low | Unloaded starts only |
      | Autotransformer | 42–64% | 42–64% | Medium | General industrial |
      | Soft starter | 150–600% FLA | Reduced | Medium | Pumps, fans, conveyors |
      | VFD | 100–150% FLA | 100% | Highest | High-inertia, variable speed |

      **Selection criteria:**
      - Required starting torque vs load torque curve
      - Acceptable voltage dip at the motor bus
      - Number of starts per hour (thermal duty)
      - Need for speed control during normal operation
      - Budget and maintenance capability
  solar-pv-connection:
    name: Solar PV Connection
    notes: |
      ![Solar PV array](https://commons.wikimedia.org/wiki/Special:FilePath/Photovoltaik_Dachanlage_Hannover_-_Schwarze_Heide_-_1_MW.jpg)

      *Image: Wikimedia Commons, CC BY-SA 3.0*

      **Connection chain:**

      PV Panels (DC) → Inverter (DC/AC) → Transformer → Grid

      **Inverter functions:**
      - DC to AC conversion
      - Maximum Power Point Tracking (MPPT)
      - Grid synchronisation
      - Power factor control
      - Anti-islanding protection
  stability-study-methodology:
    name: Stability Study Methodology
    notes: |
      **Complete transient stability study workflow:**

      1. **Build network model** — generators with IEEE 421.5
         excitation, governor models, load models (constant
         impedance / constant current / constant power mix)

      2. **Establish base case power flow** — verify steady-state
         operating point, generator MW/MVAr dispatch, voltage profile

      3. **Define contingencies** — N-1 and critical N-2 events:
         three-phase faults, line trips, generator trips, load rejection

      4. **Run time-domain simulation** — typically 5–20 seconds,
         monitoring rotor angles, bus voltages, line flows

      5. **Assess stability criteria:**
         - Rotor angle separation < 180° (or returns toward equilibrium)
         - Voltage recovery > 0.8 pu within 1 second of fault clearing
         - Frequency within acceptable band (49.5–50.5 Hz for UK)
         - Damping ratio of oscillations > 5%

      6. **Determine CCT** for each contingency — binary search
         on fault duration until stability boundary found

      7. **Verify protection operates within CCT** — if not,
         protection settings or system reinforcement required

      **Software tools:** PSS/E, PowerWorld, DIgSILENT PowerFactory,
      ETAP, PSCAD (for electromagnetic transients)
  standards:
    name: Standards
    notes: |
      Key fault calculation standards:

      - **IEC 60909:** International standard, uses voltage factors
      - **IEEE C37 series:** North American practice
      - **ENA G74:** UK-specific for DG connections

      IPSA supports IEC 60909 and multiple other methods.
  star-delta-and-autotransformer-starting:
    name: Star-Delta and Autotransformer Starting
    notes: |
      ![Induction motor internals](https://commons.wikimedia.org/wiki/Special:FilePath/Motor_internals.JPG)

      *Image: Induction motor internals — Wikimedia Commons, Public Domain*

      **Star-delta starting (Y-Δ):**
      - Motor windings connected in star during start, then switched to delta
      - Both current and torque reduced to **33% of DOL values**
      - Suitable only for unloaded or light-load starts
      - Transition causes a current transient (momentary disconnection)
      - Motor must have both ends of all three phase windings accessible (6 terminals)

      **Autotransformer starting:**
      Common taps at 50%, 65%, 80% of line voltage.

      At the 65% tap:

      | Parameter | Value |
      |---|---|
      | Motor terminal voltage | 65% of line |
      | Motor current | 65% of DOL motor current |
      | **Line current** | **42% of DOL** ($0.65^2 = 0.42$) |
      | Motor torque | 42% of DOL ($\propto V^2$) |

      The autotransformer provides better **torque-per-line-ampere**
      ratio than star-delta because the transformer action reduces
      line current by the square of the voltage ratio.

      **Key advantage:** Line current = motor current × tap²,
      giving more starting torque for the same line current impact.
  substation-diagram:
    name: Substation Diagram
    notes: |
      Typical voltage hierarchy:
      ```
      400kV ──┬── GSP
              │
      132kV ──┼── BSP
              │
       33kV ──┼── Primary
              │
       11kV ──┼── Secondary
              │
      400V ───┴── Consumer
      ```

      Each step typically has 2-3 transformers for redundancy.
  synchronous-machine-basics:
    name: Synchronous Machine Basics
    notes: |
      ![Synchronous generator](https://commons.wikimedia.org/wiki/Special:FilePath/Turbogenerator01.jpg)

      *Image: Wikimedia Commons, Public Domain*

      **Speed-frequency relationship:**

      $$f = \frac{P \times N}{120}$$

      Where:
      - f = frequency (Hz)
      - P = number of poles
      - N = speed (rpm)

      For 50Hz: 2-pole = 3000rpm, 4-pole = 1500rpm
  system-hierarchy:
    name: System Hierarchy
    notes: |
      Typical power flow path:

      1. **Generation** (11-25 kV)
      2. **Step-up** to transmission (275-400 kV)
      3. **Transmission** (bulk power transfer)
      4. **Step-down** to sub-transmission (132 kV)
      5. **Distribution** (33 kV → 11 kV → 400 V)
      6. **Consumer** (400 V three-phase / 230 V single-phase)
  system-losses:
    name: System Losses
    notes: |
      Total real power losses:

      $$P_{loss} = \sum P_{generation} - \sum P_{load}$$

      **Typical values:** 2-8% of total generation

      **Loss breakdown:**
      - Transmission: ~2-3%
      - Distribution: ~4-6%

      High losses indicate inefficient power flow paths.
  tap-changers:
    name: Tap Changers
    notes: |
      Adjust turns ratio to regulate voltage.

      **OLTC (On-Load Tap Changer):**
      - Changes taps without interrupting load
      - Typical range: ±10% in 1.25% or 1.67% steps
      - Located on HV winding (lower current)
      - Automatic voltage regulation (AVR) control

      **Off-circuit tap changer:**
      - Must de-energize to change
      - Used for fixed adjustment only
  tcc-basics:
    name: TCC Basics
    notes: |
      Log-log plot showing operating time vs current.

      **Axes:**
      - X-axis: Current (log scale), usually in Amps
      - Y-axis: Time (log scale), in seconds

      **Why log-log?** Covers wide ranges (0.01s to 1000s, 10A to 100kA)
  tcc-example:
    name: TCC Example
    notes: |
      Reading a coordination study:
      ```plaintext
      Time (s)
      1000 |
       100 |          [Upstream Relay]
        10 |     [Downstream Relay]
         1 |  
       0.1 | [Fuse]
      0.01 |_________________________
           10   100   1k   10k   Current (A)
      ```

      Check gaps between curves at fault current levels.
  thd-calculation-and-ieee-519-limits:
    name: THD Calculation and IEEE 519 Limits
    notes: |
      **Total Harmonic Distortion:**

      $$THD = \frac{\sqrt{\sum_{h=2}^{H} V_h^2}}{V_1} \times 100\%$$

      where $V_h$ is the RMS value of the $h$th harmonic
      and $V_1$ is the fundamental component.
      $H$ is typically taken as 50 (can be limited to 25
      in most practical cases).

      **IEEE 519-2022 voltage distortion limits at PCC:**

      | System Voltage | Individual Harmonic | THDv |
      |---|---|---|
      | ≤ 1 kV | 5.0% | 8.0% |
      | 1–69 kV | 3.0% | 5.0% |
      | 69–161 kV | 1.5% | 2.5% |
      | > 161 kV | 1.0% | 1.5% |

      **IEEE 519-2022 current distortion limits** depend on
      the ratio $I_{SC}/I_L$ (short-circuit current to
      maximum demand load current) at the PCC — higher
      ratios (stiffer systems) allow more distortion.

      The limits apply at the **point of common coupling
      (PCC)** between utility and customer, not at
      individual equipment terminals.
  the-a-operator:
    name: The 'a' Operator
    notes: |
      Complex operator that rotates by 120°:

      $$a = 1 \angle 120° = -0.5 + j0.866$$

      $$a^2 = 1 \angle 240° = -0.5 - j0.866$$

      $$a^3 = 1$$

      $$1 + a + a^2 = 0$$
  the-four-ss:
    name: The Four S's
    notes: |
      **Speed:** Clear faults quickly (typically <100ms for transmission)
      - Limits equipment damage
      - Reduces arc flash energy
      - Maintains stability

      **Selectivity:** Only trip the minimum necessary equipment
      - Also called "discrimination"
      - Faulted section isolated, rest remains energized

      **Sensitivity:** Detect all faults, even low-magnitude ones
      - Must see minimum fault current
      - Balance with security (avoid nuisance trips)

      **Security/Reliability:** Operate when required, not otherwise
      - Dependability: Will operate for genuine faults
      - Security: Won't operate for external faults or load
  the-swing-equation:
    name: The Swing Equation
    notes: |
      ![Steam turbine rotor](https://commons.wikimedia.org/wiki/Special:FilePath/Dampfturbine_Laeufer01.jpg)

      *Image: Steam turbine rotor — Wikimedia Commons, CC BY-SA 3.0*

      The **swing equation** governs rotor angle dynamics following
      a disturbance. It balances mechanical input against electrical
      output through the rotor's angular momentum:

      $$M \frac{d^2\delta}{dt^2} = P_m - P_e = P_a$$

      where $M$ is angular momentum, $\delta$ is rotor angle relative
      to synchronous reference, $P_m$ is mechanical power input,
      $P_e$ is electrical power output, and $P_a$ is accelerating power.

      In per-unit form using the **inertia constant** $H$ (MJ/MVA):

      $$\frac{2H}{\omega_s} \frac{d^2\delta}{dt^2} = P_m - P_e$$

      **Typical inertia constants:**

      | Machine Type | H (seconds) |
      |---|---|
      | Steam turbine generators | 4–9 |
      | Hydro units | 2–4 |
      | Wind (DFIG) | 2–6 |

      Higher $H$ means more stored kinetic energy and longer time
      to respond to disturbances. This explains concern about
      **reduced system inertia** as synchronous generation is
      displaced by converter-interfaced renewables.

      **Physical interpretation:**
      - When $P_m > P_e$: rotor accelerates, $\delta$ increases
      - When $P_e > P_m$: rotor decelerates, $\delta$ decreases
      - Steady state: $P_m = P_e$, $\delta$ constant
  the-three-sequences:
    name: The Three Sequences
    notes: |
      ![Symmetrical components](https://commons.wikimedia.org/wiki/Special:FilePath/Symmetrical_components_three_phase.svg)

      *Image: Wikimedia Commons, CC BY-SA 4.0*

      **Positive sequence (1):** ABC rotation (normal operating condition)
      - Generators produce only positive sequence EMF

      **Negative sequence (2):** ACB rotation (reverse)
      - Created by unbalanced conditions
      - Causes heating in machines

      **Zero sequence (0):** All three phasors in phase
      - Represents ground return current
      - Only flows if there's a ground path
  the-voltage-rise-problem:
    name: The Voltage Rise Problem
    notes: |
      Traditional networks designed for **one-way power flow**:
      ```
      Substation → Feeder → Loads
      (Voltage drops along feeder)
      ```

      With DG, power can flow **backwards**:
      ```
      Substation ← DG export
      (Voltage rises at DG location)
      ```

      Voltage may exceed statutory limits (+10% / -6% in UK).
  thermal-and-voltage-limits:
    name: Thermal and Voltage Limits
    notes: |
      ![Electrical substation](https://commons.wikimedia.org/wiki/Special:FilePath/Electrical_Substation.JPG)

      *Image: Electrical substation — Wikimedia Commons*

      **Transmission line thermal ratings:**

      | Rating Type | Description | Duration |
      |---|---|---|
      | Normal | Continuous operation | Indefinite |
      | Emergency (LTE) | 110–125% of normal | 2–4 hours |
      | Short-time (STE) | Higher than emergency | 15–30 minutes |

      Line ratings depend on conductor type, ambient
      temperature, wind speed, and acceptable sag.
      IEEE 738 defines the calculation methodology.

      **Transformer loading (IEEE C57.91):**

      | Loading Level | Hot-spot Limit | Duration |
      |---|---|---|
      | Normal | 110°C | Continuous |
      | Emergency | 140°C | Hours (depends on prior loading) |
      | Short-time | 180°C | Minutes |

      **Voltage limits:**

      | Condition | Typical Range |
      |---|---|
      | Pre-contingency | 0.95–1.05 pu |
      | Post-contingency | 0.90–1.05 pu |
      | EHV systems | Tighter bands (±2.5%) |
  thermal-ratings:
    name: Thermal Ratings
    notes: |
      Current limited by conductor temperature (sag limit or annealing).

      **Static rating:** Conservative fixed value
      - Assumes: high ambient, full sun, low wind
      - Typically 50-75% of actual capacity

      **Dynamic Line Rating (DLR):** Real-time calculation
      - Uses weather data (wind, ambient, solar)
      - Can increase capacity 10-30%
      - Requires monitoring equipment
  three-phase-fault-lll:
    name: Three-Phase Fault (LLL)
    notes: |
      All three phases short-circuited together (with or without ground).

      ![Three-phase fault](https://commons.wikimedia.org/wiki/Special:FilePath/Threephaseshortcircuit.svg)

      *Image: Wikimedia Commons, CC BY-SA 3.0*

      - **Severity:** Most severe (highest current)
      - **Frequency:** Rarest (~5% of faults)
      - **Analysis:** Simplest - system remains balanced, only positive sequence needed
  time-grading:
    name: Time Grading
    notes: |
      Upstream devices have progressively longer delays.

      **Coordination Time Interval (CTI):** 0.3 - 0.5 seconds

      Accounts for:
      - Breaker operating time (~50-80 ms)
      - Relay overshoot (~50 ms)
      - Safety margin (~100 ms)

      **Example:**
      - Relay C: 0.1s at max fault
      - Relay B: 0.1 + 0.4 = 0.5s
      - Relay A: 0.5 + 0.4 = 0.9s
  transformation-equations:
    name: Transformation Equations
    notes: |
      **Phase to sequence:**

      $$\begin{bmatrix} V_0 \\ V_1 \\ V_2 \end{bmatrix} = \frac{1}{3} \begin{bmatrix} 1 & 1 & 1 \\ 1 & a & a^2 \\ 1 & a^2 & a \end{bmatrix} \begin{bmatrix} V_a \\ V_b \\ V_c \end{bmatrix}$$

      **Sequence to phase:**

      $$\begin{bmatrix} V_a \\ V_b \\ V_c \end{bmatrix} = \begin{bmatrix} 1 & 1 & 1 \\ 1 & a^2 & a \\ 1 & a & a^2 \end{bmatrix} \begin{bmatrix} V_0 \\ V_1 \\ V_2 \end{bmatrix}$$
  transformer-basics:
    name: Transformer Basics
    notes: |
      ![Power transformer](https://commons.wikimedia.org/wiki/Special:FilePath/Transformer3d_col3.svg)

      *Image: Wikimedia Commons, CC BY-SA 3.0*

      Voltage transformation by turns ratio:

      $$\frac{V_1}{V_2} = \frac{N_1}{N_2}$$

      **Ratings specified:**
      - MVA (apparent power)
      - Primary/secondary voltage (kV)
      - Impedance (%Z on rating)
      - Vector group
  transformer-differential-settings:
    name: Transformer Differential Settings
    notes: |
      Transformer differential relays use **percentage restraint**
      characteristics to remain stable during through-faults where
      CT errors produce false differential current.

      The restraint current is typically:

      $$I_{restraint} = \frac{|I_1| + |I_2|}{2}$$

      **Dual-slope characteristic:**

      | Parameter | Typical Setting | Purpose |
      |---|---|---|
      | Slope 1 | 15–25% | Normal CT mismatch errors |
      | Slope 2 | 50–80% | CT saturation during heavy through-faults |
      | Minimum pickup | 0.2–0.3 pu | Sensitivity floor |

      **Harmonic restraint** prevents false tripping during
      transformer energisation (magnetising inrush):
      - Inrush produces characteristic **2nd harmonic content**
      - Typical restraint threshold: **15–20% second harmonic** relative to fundamental
      - Over-excitation produces 5th harmonic — separate restraint at ~25%

      **CT ratio mismatch compensation:**
      Software in numerical relays applies vector group correction
      (e.g., Dyn11 → 30° phase shift) and ratio compensation
      automatically. For electromechanical relays, interposing CTs
      are required.
  transformer-impedance:
    name: Transformer Impedance
    notes: |
      Impedance limits fault current and causes voltage drop.

      **Typical values:**
      - Distribution (11/0.4kV): 4-6%
      - Primary (33/11kV): 7-10%
      - Transmission (132/33kV): 10-15%

      **Fault current through transformer:**

      $$I_{fault} = \frac{100}{Z\%} \times I_{rated}$$

      Example: 10% impedance → fault current = 10× rated
  transmission-owners-tos:
    name: Transmission Owners (TOs)
    notes: |
      Own and maintain the high-voltage transmission network:

      | TO | Area | Voltages |
      |----|------|----------|
      | **NGET** | England & Wales | 275kV, 400kV |
      | **SP Transmission** | Southern Scotland | 132kV, 275kV, 400kV |
      | **SHET** (SSE) | Northern Scotland | 132kV, 275kV |

      **Note:** 132kV is transmission in Scotland, distribution in England & Wales.

      Regulated by Ofgem under RIIO-T2 price control.
  transmission-voltages:
    name: Transmission Voltages
    notes: |
      **Supergrid (England & Wales):**
      - 400kV - Main bulk transmission
      - 275kV - Older transmission, some areas

      **Scotland:**
      - 400kV, 275kV - Main transmission
      - 132kV - Transmission (not distribution)

      **Interconnectors:**
      - HVDC links to France, Netherlands, Belgium, Norway, Ireland
      - Typically ±320kV to ±525kV DC
  typical-protection-schemes:
    name: Typical Protection Schemes
    notes: |
      | Equipment | Primary | Backup |
      |-----------|---------|--------|
      | Transmission line | Distance (21) | Distance Z2/Z3, OC |
      | Transformer | Differential (87T) | Overcurrent (51), REF |
      | Busbar | Differential (87B) | Breaker fail, remote |
      | Generator | Differential (87G) | Overcurrent, loss of excitation |
      | Motor | Thermal (49), Diff | Overcurrent (51) |
  uk-g99-requirements:
    name: UK G99 Requirements
    notes: |
      **Loss of Mains (LoM) protection settings:**

      | Protection | Setting | Delay |
      |------------|---------|-------|
      | Under-frequency | 47.5 Hz | 0.5s |
      | Over-frequency | 52.0 Hz | 0.5s |
      | Under-voltage | 0.8 pu | 2.5s |
      | Over-voltage | 1.1 pu | 1.0s |
      | RoCoF | 1.0 Hz/s | 0.5s |

      **Note:** RoCoF settings relaxed from 0.125 Hz/s to 1.0 Hz/s to improve stability with low inertia.

      Vector shift generally **not used** in UK (nuisance tripping).
  uk-voltage-limits:
    name: UK Voltage Limits
    notes: |
      **Statutory limits (ESQCR):**
      - LV: 230V +10% / -6% (216V to 253V)
      - HV: ±6% of nominal

      **DNO planning limits (more conservative):**
      - Typically allow +3% rise from DG at minimum load
      - Ensures headroom for voltage regulation
  vector-groups:
    name: Vector Groups
    notes: |
      ![Transformer vector groups](https://commons.wikimedia.org/wiki/Special:FilePath/Delta-Wye_Transformer.png)

      *Image: Wikimedia Commons*

      Notation describes winding connections and phase shift.

      **Letters:**
      - D/d = Delta
      - Y/y = Star (Wye)
      - N/n = Neutral brought out
      - Capital = HV, lowercase = LV

      **Number:** Phase shift in clock hours (× 30°)

      **Common groups:**
      | Group | Shift | Application |
      |-------|-------|-------------|
      | Dyn11 | -30° | Distribution |
      | YNd1 | +30° | Generator step-up |
      | Yy0 | 0° | Auto-transformer |
  voltage-classifications:
    name: Voltage Classifications
    notes: |
      | Classification | Voltage Range | Application |
      |----------------|---------------|-------------|
      | Low Voltage (LV) | Up to 1 kV | Residential, commercial |
      | Medium Voltage (MV) | 1 - 35 kV | Distribution, industrial |
      | High Voltage (HV) | 35 - 230 kV | Sub-transmission |
      | Extra High (EHV) | 230 - 765 kV | Bulk transmission |
  voltage-dip-calculation:
    name: Voltage Dip Calculation
    notes: |
      The percentage voltage dip at a motor bus:

      $$\%V_{dip} \approx \frac{kVA_{start}}{kVA_{SC}} \times 100\%$$

      where $kVA_{start}$ is motor starting kVA and $kVA_{SC}$ is
      the system short-circuit capacity at the motor bus.

      **Acceptance criteria for different equipment:**

      | Equipment | Minimum Voltage |
      |---|---|
      | Motor terminals (adequate torque) | 80% (torque ∝ V², so 64% torque) |
      | AC contactors (pickup) | 85% |
      | Solid-state controls | 90% |
      | Lighting flicker (objectionable) | 97% (3% dip limit) |

      **Generator-supplied systems are more severe:**
      Generator transient reactance $X'_d$ (typically 15–25%)
      limits fault contribution, making voltage dips deeper
      compared to utility-supplied systems.

      **Generator sizing rules of thumb:**

      | Starting Method | Generator kVA : Motor HP |
      |---|---|
      | Direct-on-line (DOL) | 10–15× |
      | Reduced-voltage methods | 3–4× |

      **IEEE 1453** addresses voltage flicker using Pst
      (short-term) and Plt (long-term) indices, with planning
      level of $P_{st} \leq 1.0$ for low-voltage systems.
  voltage-drop-calculation:
    name: Voltage Drop Calculation
    notes: |
      Three-phase voltage drop:

      $$\Delta V = \frac{\sqrt{3} \times I \times L \times (R \cos\phi + X \sin\phi)}{1000}$$

      Where:
      - I = current (A)
      - L = length (m)
      - R, X = resistance, reactance (Ω/km)

      **UK limits (BS 7671):**
      - Lighting: 3%
      - Other: 5%
      - Total from origin: 5%
  voltage-factors-c-factors:
    name: Voltage Factors (c factors)
    notes: |
      Unlike ANSI/IEEE (prefault voltage = 1.0 pu), IEC 60909 uses **voltage factors** to account for voltage variations, tap positions, and subtransient behaviour.

      | Voltage Level | $c_{max}$ | $c_{min}$ |
      |---------------|-----------|-----------|
      | LV (≤1 kV) | 1.05 | 0.95 |
      | MV/HV (>1 kV) | 1.10 | 1.00 |

      - $c_{max}$: equipment rating (maximum fault current)
      - $c_{min}$: protection coordination (minimum fault current)

      ![Three-phase short circuit diagram](https://commons.wikimedia.org/wiki/Special:FilePath/Threephaseshortcircuit.svg)

      *Image: Three-phase short circuit — Wikimedia Commons, CC BY-SA 3.0*
  voltage-profile:
    name: Voltage Profile
    notes: |
      Plot of voltage magnitude across buses, typically ordered by electrical distance from source.

      **Acceptable range:** Usually 0.95 - 1.05 pu (±5%)

      **Violations indicate:**
      - Heavy loading (voltage drop)
      - Insufficient reactive support
      - Need for tap changer adjustment or capacitor banks
  voltage-rise-formula:
    name: Voltage Rise Formula
    notes: |
      Approximate voltage change from injected power:

      $$\Delta V \approx \frac{P \cdot R + Q \cdot X}{V}$$

      Where:
      - P, Q = active/reactive power injection
      - R, X = resistance/reactance to source
      - V = nominal voltage

      **In per-unit:**

      $$\Delta V_{pu} \approx P_{pu} \cdot R_{pu} + Q_{pu} \cdot X_{pu}$$
  voltage-stability-and-p-v-curves:
    name: Voltage Stability and P-V Curves
    notes: |
      **P-V (nose) curves** plot bus voltage against system
      loading — the fundamental tool for voltage stability
      assessment.

      Key features of the P-V curve:
      - **Operating point**: current voltage and loading
      - **Nose point**: maximum loadability (voltage collapse)
      - **Stability margin**: distance from operating point
        to the nose point, typically expressed in MW

      $$\text{Margin} = P_{nose} - P_{operating}$$

      A system is **voltage stable** if the operating point
      is on the upper portion of the curve (above the nose).

      **Factors reducing voltage stability margin:**
      - Loss of reactive power sources (generators at Q limit)
      - Long transmission distances
      - Heavy loading conditions
      - Loss of transmission lines (N-1 contingencies)

      Post-contingency P-V analysis determines whether
      voltage collapse risk exists after credible outages.
  what-is-islanding:
    name: What is Islanding?
    notes: |
      ![Grid connection with storage](https://commons.wikimedia.org/wiki/Special:FilePath/BESS_(battery_energy_storage_system).svg)

      *Image: Wikimedia Commons, CC BY-SA 4.0*

      **Islanding:** DG continues to energise a section of network that has been disconnected from the main grid.

      Can occur when:
      - Upstream breaker opens (fault, maintenance)
      - DG output matches local load (balanced island)
  why-iterative:
    name: Why Iterative?
    notes: |
      Load flow equations are **nonlinear** (power = V × I, but I depends on V).

      No closed-form solution exists for networks with more than a few buses.

      Must iterate: guess → calculate → refine → repeat until converged.
  why-symmetrical-components:
    name: Why Symmetrical Components?
    notes: |
      Unbalanced three-phase systems are difficult to analyze directly.

      **Solution:** Decompose into three **balanced** systems that can be analyzed independently, then recombine.

      Invented by Charles Fortescue (1918).
  why-transform-voltage:
    name: Why Transform Voltage
    notes: |
      Power loss in transmission:

      $$P_{loss} = I^2 R$$

      For fixed power $P = V \cdot I$, doubling voltage halves current, reducing losses to **one quarter**.

      **Example:** 100 MW at 400 kV vs 11 kV
      - At 400 kV: I = 144 A
      - At 11 kV: I = 5,249 A (36× higher losses!)
  wind-turbine-connection:
    name: Wind Turbine Connection
    notes: |
      ![Wind turbine](https://commons.wikimedia.org/wiki/Special:FilePath/Wind_turbine_int.svg)

      *Image: Arne Nordmann, Wikimedia Commons, CC BY-SA 2.5*

      **Two main types:**

      **DFIG (Doubly-Fed Induction Generator):**
      - Partial converter (30% rating)
      - Limited fault ride-through
      - Older technology

      **Full Converter:**
      - 100% power through converter
      - Better fault ride-through
      - Decoupled from grid frequency
      - Modern standard
  x-r-ratio:
    name: X/R Ratio
    notes: |
      Ratio of reactance to resistance in fault path.

      **Importance:**
      - Determines DC offset decay rate
      - Affects peak asymmetrical current
      - Higher X/R → slower decay → higher peak

      **Typical values:**
      - Transmission: X/R = 15-30
      - Distribution: X/R = 5-15
      - LV systems: X/R = 2-5
  zero-sequence-impedance:
    name: Zero-Sequence Impedance
    notes: |
      Zero-sequence behaviour depends critically on **transformer winding connections**:

      | Winding | $Z_0$ Path |
      |---------|-----------|
      | Yg-Yg | Through both windings |
      | Yg-Delta | Blocked by delta (provides ground reference) |
      | Delta-Delta | No zero-sequence path |
      | Yg-Yg (with delta tertiary) | Stabilised, delta provides $Z_0$ circulation |

      Delta windings act as zero-sequence current traps — they circulate $I_0$ within the winding but don't pass it through.

      ![Delta-Wye transformer connection](https://commons.wikimedia.org/wiki/Special:FilePath/Delta-Wye_Transformer.png)

      *Image: Wye-Delta transformer connection — Wikimedia Commons, Public Domain*
  zone-definition:
    name: Zone Definition
    notes: |
      A **zone** is an area of the network protected by a specific relay or set of relays.

      **Zone boundaries** defined by CT locations.

      **Principle:** Every element must be within at least one zone.
  zone-overlap:
    name: Zone Overlap
    notes: |
      Zones should **overlap at circuit breakers** to avoid blind spots.
      ```
      Zone A              Zone B
      |<────────────>|<────────────>|
      CT            CB            CT
      ```

      Fault at CB location seen by both zones - both may trip (acceptable for reliability).
