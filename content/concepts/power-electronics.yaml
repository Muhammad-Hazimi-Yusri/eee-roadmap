# EEE Roadmap — Concept Library: power-electronics
# Auto-generated by scripts/migrate-to-library.mjs — review and edit as needed.
# See CONTRIBUTING.md for the concept file format.
_meta:
  domain: power-electronics
  description: "Power conversion: inverters, converters, and motor drives"
concepts:
  boost-converter:
    name: Boost converter
    notes: |
      The boost converter steps voltage UP. Essential for battery-powered devices that need higher voltages than a single cell provides (e.g., 3.7V Li-ion to 5V USB).

      ![Boost converter topology](https://upload.wikimedia.org/wikipedia/commons/0/09/Boost_converter.svg)

      ## Operating Principle

      When the switch is ON, current builds in the inductor while the output capacitor supplies the load. When the switch is OFF, the inductor voltage adds to the input voltage, forward-biasing the diode and charging the capacitor to a higher voltage.

      ## Key Equations

      Output voltage (ideal, CCM):

      $$V_{out} = \frac{V_{in}}{1-D}$$

      As $D \to 1$, $V_{out} \to \infty$ (theoretically). Practical limit is about 4-5x boost due to losses.

      Inductor current (average):

      $$I_L = \frac{I_{out}}{1-D}$$

      Note: Inductor current is HIGHER than output current — this is key for component selection.

      ## Design Considerations

      The boost has right-half-plane zero, making it harder to stabilize than the buck. Input current is continuous (good for batteries), but output current is pulsed (need larger output cap).

      Boost converters cannot limit inrush current at startup — consider soft-start or pre-charge circuits.
  bridge-rectifier:
    name: Bridge rectifier
    notes: |
      Bridge rectifiers convert AC to DC using four diodes arranged so current always flows the same direction through the load, regardless of AC polarity.

      ![Full-wave bridge rectifier](https://upload.wikimedia.org/wikipedia/commons/c/c9/Full-wave-bridge-rectifier.svg)

      ## Half-Wave vs Full-Wave

      Half-wave (single diode): Only conducts on positive half-cycles. Output frequency equals input frequency. Poor efficiency, high ripple.

      Full-wave bridge: Conducts on both half-cycles. Output frequency is 2× input frequency. Better efficiency, lower ripple.

      ## Key Equations

      For full-wave bridge with resistive load:

      Average DC output voltage:

      $$V_{dc} = \frac{2 V_m}{\pi} \approx 0.637 V_m$$

      RMS output voltage:

      $$V_{rms} = \frac{V_m}{\sqrt{2}} \approx 0.707 V_m$$

      Ripple factor:

      $$r = \sqrt{\left(\frac{V_{rms}}{V_{dc}}\right)^2 - 1} \approx 0.48$$

      ## Adding a Filter Capacitor

      With capacitor filter, output voltage approaches $V_m$ (peak). Ripple voltage:

      $$\Delta V \approx \frac{I_{load}}{2 f C}$$

      Larger C = lower ripple, but higher inrush current and worse power factor.

      ## Diode Selection

      PIV (Peak Inverse Voltage) rating must exceed $V_m$ for half-wave, $2V_m$ for center-tap, or $V_m$ for bridge. Current rating must handle peak and average currents including capacitor charging spikes.
  buck-converter:
    name: Buck converter
    notes: |
      The buck converter steps voltage DOWN. It's the most common DC-DC topology, found in everything from phone chargers to CPU voltage regulators.

      ![Buck converter topology](https://upload.wikimedia.org/wikipedia/commons/0/09/Buck_converter.svg)

      ## Operating Principle

      When the switch (MOSFET) is ON, current flows through the inductor to the load, storing energy in the inductor's magnetic field. When the switch is OFF, the inductor releases its energy through the freewheeling diode to maintain current flow.

      ## Key Equations

      Output voltage (ideal, CCM):

      $$V_{out} = D \cdot V_{in}$$

      Where $D$ is the duty cycle (0 to 1). Since $D < 1$, output is always less than input.

      Inductor ripple current:

      $$\Delta I_L = \frac{V_{out}(1-D)}{L \cdot f_{sw}}$$

      Output voltage ripple:

      $$\Delta V_{out} = \frac{\Delta I_L}{8 \cdot f_{sw} \cdot C}$$

      ## Design Considerations

      Choose $L$ large enough to stay in CCM at minimum load. Choose $C$ to meet ripple requirements. Higher switching frequency $f_{sw}$ allows smaller L and C but increases switching losses.

      The buck is synchronous when the diode is replaced with a second MOSFET for higher efficiency.
  ccm-dcm:
    name: CCM/DCM
    notes: |
      CCM (Continuous Conduction Mode) and DCM (Discontinuous Conduction Mode) describe whether inductor current reaches zero during the switching cycle.

      ## CCM - Continuous Conduction Mode

      Inductor current never reaches zero. Current ripples around a DC average.

      Characteristics:
      - Simple voltage conversion ratios ($V_{out} = D \cdot V_{in}$ for buck)
      - Lower peak currents, lower RMS currents
      - Second-order system dynamics
      - Preferred for high-power applications

      ## DCM - Discontinuous Conduction Mode

      Inductor current reaches zero and stays zero for part of each cycle.

      Characteristics:
      - Voltage ratio depends on load: $V_{out} = f(D, V_{in}, L, R_{load}, f_{sw})$
      - Higher peak currents for same average power
      - First-order dynamics (easier to stabilize)
      - Common in light-load conditions

      ## Boundary Condition

      The CCM/DCM boundary occurs when minimum inductor current just touches zero:

      $$L_{crit} = \frac{(1-D) \cdot R_{load}}{2 \cdot f_{sw}}$$

      For $L > L_{crit}$, converter operates in CCM.

      ## Design Implications

      Many converters operate in CCM at full load and transition to DCM at light load. Modern controllers often use different compensation for each mode or force CCM with synchronous rectification.
  delta-wye:
    name: Delta/Wye
    notes: |
      **Three-phase transformer connections** affect voltage ratios, phase shifts, and grounding.

      **Wye (Star) connection:**
      - Neutral point available for grounding
      - Line voltage = $\sqrt{3}$ × phase voltage
      - $V_L = \sqrt{3} V_{ph}$

      **Delta connection:**
      - No neutral point
      - Line voltage = phase voltage
      - Line current = $\sqrt{3}$ × phase current
      - Third harmonic currents circulate (don't distort output)

      **Common transformer configurations:**

      | Primary | Secondary | Phase Shift | Typical Use |
      |---------|-----------|-------------|-------------|
      | Δ | Y | 30° lag | Step-up at generators |
      | Y | Δ | 30° lead | Step-down distribution |
      | Y | Y | 0° | Autotransformers |
      | Δ | Δ | 0° | Industrial loads |

      **Vector groups** (IEC notation): Dy11 means Delta primary, wye secondary, 30° lag (11 o'clock position).

      **Grounding considerations:**
      - Wye: Can ground neutral (limits fault current, allows ground fault detection)
      - Delta: Ungrounded or corner-grounded
      - Zig-zag: Creates neutral for grounding ungrounded delta

      ![Delta-Wye transformer](https://upload.wikimedia.org/wikipedia/commons/thumb/5/59/Transformer_wye-delta.svg/300px-Transformer_wye-delta.svg.png)
  duty-cycle:
    name: Duty cycle
    notes: |
      Duty cycle is the ratio of ON-time to total switching period. It's the primary control variable in PWM converters.

      $$D = \frac{t_{on}}{T} = t_{on} \cdot f_{sw}$$

      Where $T = t_{on} + t_{off}$ is the switching period and $f_{sw} = 1/T$ is the switching frequency.

      ## Duty Cycle by Topology

      | Topology | Voltage Relationship | D Range |
      |----------|---------------------|---------|
      | Buck | $V_{out} = D \cdot V_{in}$ | 0 to 1 |
      | Boost | $V_{out} = V_{in}/(1-D)$ | 0 to 1 |
      | Buck-Boost | $V_{out} = -D \cdot V_{in}/(1-D)$ | 0 to 1 |

      ## Practical Limits

      Extreme duty cycles (very low or very high) cause problems:
      - Very low D: Minimum on-time limits of gate drivers
      - Very high D: No time for inductor reset, transformer core saturation

      Typical practical range is 10% to 90%. For wider conversion ratios, consider transformer-isolated topologies or cascaded converters.

      ## Control Methods

      Voltage-mode control: PWM comparator compares error amplifier output to sawtooth ramp.

      Current-mode control: Inner current loop sets duty cycle based on inductor current, outer voltage loop sets current reference. Provides inherent overcurrent protection and better transient response.
  excitation:
    name: Excitation
    notes: |
      **Excitation systems** control the DC field current in the rotor, which determines generator output voltage and reactive power.

      **Functions:**
      - Maintain terminal voltage at setpoint
      - Control reactive power output (VAR support)
      - Enhance transient stability
      - Provide fault current for protection

      **Excitation equation:**

      $$E_a = k \cdot \phi \cdot \omega = k \cdot I_f \cdot \omega$$

      Internal EMF proportional to field current $I_f$ (in linear region).

      **Exciter types:**
      - **DC exciter**: Older, DC generator on same shaft
      - **AC exciter**: AC generator + rotating rectifier (brushless)
      - **Static exciter**: Thyristor rectifier from station supply

      **Automatic Voltage Regulator (AVR):**
      - Senses terminal voltage
      - Compares to reference
      - Adjusts field current via exciter

      **V-curves**: Plot of armature current vs field current at constant power.
      - Under-excited: Absorbs VARs (leading PF)
      - Over-excited: Supplies VARs (lagging PF)

      Generators normally run slightly over-excited to support grid voltage.
  grounding:
    name: Grounding
    notes: |
      **Grounding (earthing)** provides safety and defines system behavior during faults.

      **Two distinct concepts:**
      - **Equipment grounding**: Metal enclosures bonded to earth (safety)
      - **System grounding**: Neutral connection to earth (fault behavior)

      **System grounding types:**

      **Solidly grounded:**
      - Neutral directly connected to earth
      - High ground fault current (easy to detect)
      - Standard for LV systems (<600V)

      **Resistance grounded:**
      - Resistor limits ground fault current
      - Low resistance: 100-400A (protection still works)
      - High resistance: 1-10A (limits damage, harder to detect)

      **Ungrounded:**
      - No intentional neutral-earth connection
      - First ground fault doesn't trip (capacitive current only)
      - Second fault = line-to-line fault
      - Requires ground fault detection

      **Ground fault current:**

      $$I_{gf} = \frac{V_{LN}}{Z_{source} + Z_{ground}}$$

      **Touch and step potential:**
      - Touch: Voltage between hand (on faulted equipment) and feet
      - Step: Voltage between feet during ground fault
      - Grounding grid design limits these during faults

      **Ground resistance testing**: Fall-of-potential method measures electrode resistance. Target: <5Ω for most systems, <1Ω for substations.
  h-bridge:
    name: H-bridge
    notes: |
      The H-bridge is a four-switch topology that can apply positive, negative, or zero voltage across a load. Named for its H-shaped schematic appearance.

      ![H-bridge circuit](https://upload.wikimedia.org/wikipedia/commons/d/d4/H_bridge.svg)

      ## Operating States

      | State | Q1 | Q2 | Q3 | Q4 | Load Voltage |
      |-------|----|----|----|----|--------------|
      | Forward | ON | OFF | OFF | ON | +Vdc |
      | Reverse | OFF | ON | ON | OFF | -Vdc |
      | Brake (high) | ON | OFF | ON | OFF | 0 (shorted) |
      | Brake (low) | OFF | ON | OFF | ON | 0 (shorted) |
      | Coast | OFF | OFF | OFF | OFF | 0 (open) |

      ## Shoot-Through Protection

      NEVER turn on both switches in the same leg (Q1+Q2 or Q3+Q4) simultaneously — this creates a short circuit called "shoot-through."

      Dead-time (both switches off briefly during transitions) prevents shoot-through but introduces distortion. Typical dead-time: 100ns - 1µs.

      ## Applications

      - DC motor speed and direction control
      - Single-phase inverters (DC to AC)
      - Class D audio amplifiers
      - Stepper motor drivers (two H-bridges)

      ## Gate Drive Considerations

      High-side switches (Q1, Q3) have floating source/emitter. Requires bootstrap or isolated gate drive. Low-side switches can use ground-referenced drivers.
  harmonics:
    name: Harmonics
    notes: |
      **Harmonics** are integer multiples of the fundamental frequency (50/60 Hz) caused by nonlinear loads.

      $$v(t) = V_1\sin(\omega t) + V_3\sin(3\omega t) + V_5\sin(5\omega t) + ...$$

      **Common harmonic sources:**
      - Switch-mode power supplies (computers, LED drivers)
      - Variable frequency drives (VFDs)
      - Rectifiers (6-pulse: 5th, 7th, 11th, 13th dominant)
      - Arc furnaces, welders
      - Saturated transformers

      **Effects of harmonics:**
      - Increased losses (skin effect, eddy currents)
      - Transformer/motor overheating
      - Capacitor failures (resonance)
      - Nuisance tripping of breakers
      - Interference with sensitive equipment

      **Total Harmonic Distortion:**

      $$THD = \frac{\sqrt{V_2^2 + V_3^2 + V_4^2 + ...}}{V_1} \times 100\%$$

      IEEE 519 limits: <5% THD at PCC for most systems.

      **Mitigation:**
      - Passive filters (tuned L-C for specific harmonics)
      - Active filters (inject anti-harmonics)
      - 12/18/24-pulse rectifiers
      - K-rated transformers (handle harmonic heating)
  igbt:
    name: IGBT
    notes: |
      The Insulated Gate Bipolar Transistor combines MOSFET gate drive simplicity with BJT-like low conduction losses at high voltage. Dominant in high-power applications.

      ![IGBT cross section](https://upload.wikimedia.org/wikipedia/commons/1/1c/IGBT_cross_section.svg)

      ## Structure

      IGBT is essentially a MOSFET driving a PNP BJT. The MOSFET provides voltage-controlled gate, the BJT provides conductivity modulation for low $V_{CE(sat)}$.

      ## Key Parameters

      $V_{CE(sat)}$: Collector-emitter saturation voltage (1.5V to 3V typical). Unlike MOSFET $R_{DS(on)}$, this is relatively constant with current.

      $V_{CE(max)}$: Voltage rating. Common: 600V, 1200V, 1700V, 3300V, 6500V.

      $t_{off}$: Turn-off time. IGBTs have "tail current" during turn-off due to stored charge. Longer than MOSFETs.

      ## Conduction Loss Comparison

      MOSFET: $P_{cond} = I^2 \cdot R_{DS(on)}$ — quadratic with current

      IGBT: $P_{cond} \approx V_{CE(sat)} \cdot I$ — linear with current

      At high currents, IGBT wins. Crossover point depends on specific devices.

      ## When to Use IGBTs

      - High voltage (> 600V)
      - High power (> 1 kW)
      - Lower switching frequency (< 50 kHz typical)
      - Motor drives, inverters, UPS, welding

      ## No Body Diode

      Unlike MOSFETs, IGBTs have no intrinsic body diode. External anti-parallel diodes required for inductive loads.
  power-mosfet:
    name: Power MOSFET
    notes: |
      Power MOSFETs are voltage-controlled switches optimized for high-current, fast-switching applications. Dominant in low-to-medium voltage (< 600V) power electronics.

      ![MOSFET structure](https://upload.wikimedia.org/wikipedia/commons/a/a5/MOSFET_Structure.svg)

      ## Key Parameters

      $R_{DS(on)}$: On-state resistance. Lower is better. Increases with temperature (positive tempco aids parallel operation). Typical: 1mΩ to 100mΩ.

      $V_{DS(max)}$: Maximum drain-source voltage. Common ratings: 30V, 60V, 100V, 200V, 600V.

      $Q_g$: Total gate charge. Determines switching speed and gate driver requirements.

      $C_{iss}$, $C_{oss}$, $C_{rss}$: Input, output, reverse transfer capacitances. Affect switching dynamics.

      ## Figure of Merit

      For a given voltage rating, the FOM captures the tradeoff between conduction and switching losses:

      $$FOM = R_{DS(on)} \times Q_g$$

      Lower FOM = better device. Modern devices achieve < 50 mΩ·nC.

      ## Body Diode

      Inherent in MOSFET structure. Conducts when $V_{DS}$ reverses. Slow reverse recovery can cause losses — use external Schottky or synchronous rectification carefully.

      ## When to Use MOSFETs

      - Low voltage (< 200V): MOSFETs dominate
      - High frequency (> 100 kHz): MOSFETs preferred
      - Low power: MOSFETs simpler to drive
      - Above 600V or high power: Consider IGBTs
  prime-movers:
    name: Prime movers
    notes: |
      **Prime movers** convert primary energy to mechanical rotation that drives generators.

      **Steam turbines** (coal, nuclear, gas combined cycle):
      - High power (100 MW - 1.5 GW)
      - High speed (3000/3600 RPM) → 2-pole generators
      - Efficiency: 33-45% (higher with combined cycle)

      **Gas turbines** (peaking plants):
      - Fast startup (minutes vs hours for steam)
      - Lower efficiency alone (~35%)
      - Combined cycle: exhaust heat makes steam → 60%+ efficiency

      **Hydro turbines:**
      - Francis: Medium head (30-300m), most common
      - Kaplan: Low head (<30m), adjustable blades
      - Pelton: High head (>300m), impulse type
      - Slow speed → many poles (12-96)

      **Wind turbines:**
      - Variable speed → power electronics interface
      - Doubly-fed induction generator (DFIG) common
      - Direct-drive permanent magnet becoming popular
      - Typical: 2-8 MW per turbine

      **Efficiency comparison:**
      | Type | Typical Efficiency |
      |------|-------------------|
      | Hydro | 85-95% |
      | Combined cycle gas | 55-62% |
      | Steam (coal) | 33-40% |
      | Nuclear | 33-37% |
      | Wind | 35-45% (capacity factor) |
  protective-relays:
    name: Protective relays
    notes: |
      **Protective relays** detect abnormal conditions and trip circuit breakers to isolate faults.

      **Overcurrent protection (50/51):**
      - Instantaneous (50): Trips immediately above pickup
      - Time-delay (51): Inverse-time characteristic

      $$t = \frac{k}{(I/I_{pickup})^n - 1}$$

      **Coordination**: Downstream devices trip first (faster curves or lower pickup).

      **Differential protection (87):**
      - Compares current entering vs leaving protected zone
      - Current in ≠ current out → internal fault

      $$I_{operate} = |I_1 + I_2| > I_{threshold}$$

      Used for: Transformers, generators, buses, large motors.

      **Distance protection (21):**
      - Measures impedance (V/I) to fault
      - Zones: Z1 (instantaneous, 80% of line), Z2 (time-delayed, 120%), Z3 (backup)
      - Primary protection for transmission lines

      **Common relay functions (ANSI):**
      | Device | Function |
      |--------|----------|
      | 25 | Sync check |
      | 27 | Undervoltage |
      | 32 | Reverse power |
      | 50 | Instantaneous OC |
      | 51 | Time OC |
      | 59 | Overvoltage |
      | 67 | Directional OC |
      | 81 | Frequency |
      | 87 | Differential |
  sags-swells:
    name: Sags/swells
    notes: |
      **Voltage sags (dips)** and **swells** are short-duration deviations from nominal voltage.

      **Sag**: Voltage drops to 10-90% of nominal for 0.5 cycles to 1 minute.
      **Swell**: Voltage rises to 110-180% of nominal for same duration.

      **Common causes:**
      - **Sags**: Motor starting, faults on adjacent feeders, utility switching
      - **Swells**: Single-line-to-ground fault (unfaulted phases rise), load rejection

      **ITIC (CBEMA) curve**: Defines voltage tolerance envelope for IT equipment.
      - Equipment should ride through sags above the curve
      - Typical: 70% voltage for 0.5s, 80% for 10s

      **Sag magnitude calculation:**

      $$V_{sag} = V_{nom} \cdot \frac{Z_{load}}{Z_{source} + Z_{load}}$$

      During upstream fault, source impedance effectively increases.

      **Mitigation:**
      - UPS (battery backup for complete outages and sags)
      - DVR (Dynamic Voltage Restorer): Injects voltage to compensate
      - Flywheel storage
      - Proper motor starter selection (soft start, VFD)

      **Measurement**: Power quality analyzers capture RMS vs time, classify events by magnitude and duration.
  single-line-diagrams:
    name: Single-line diagrams
    notes: |
      **Single-line diagrams (SLDs)** represent three-phase systems with one line per circuit, using standard symbols.

      **Common symbols:**

      | Symbol | Meaning |
      |--------|---------|
      | ─○─ | Circuit breaker |
      | ─/─ | Disconnect switch |
      | ─┬─ | Bus bar |
      | ⏚ | Ground |
      | ⟨coil⟩ | Transformer (two windings) |
      | ∿ | Generator |
      | ➝ | Load/feeder |

      **Information shown:**
      - Equipment ratings (MVA, kV)
      - Impedances (for fault calculations)
      - CT/PT ratios (for protection)
      - Relay functions (ANSI device numbers)

      **ANSI device numbers (common):**
      - 50: Instantaneous overcurrent
      - 51: Time overcurrent
      - 52: AC circuit breaker
      - 87: Differential protection
      - 21: Distance relay

      **Per-unit system**: Normalizes values for easier calculation.

      $$Z_{pu} = \frac{Z_{actual}}{Z_{base}}$$

      $$Z_{base} = \frac{V_{base}^2}{S_{base}}$$

      Makes transformers "disappear" when using same base - impedances simply add regardless of voltage level.
  switching-losses:
    name: Switching losses
    notes: |
      Switching losses occur during transitions when both voltage and current are simultaneously non-zero. Often dominates total losses at high frequencies.

      ## Turn-On Loss

      During turn-on, voltage across the device falls while current rises. Energy lost:

      $$E_{on} = \frac{1}{2} V_{DS} \cdot I_D \cdot t_{rise}$$

      ## Turn-Off Loss

      During turn-off, current falls while voltage rises:

      $$E_{off} = \frac{1}{2} V_{DS} \cdot I_D \cdot t_{fall}$$

      ## Total Switching Power Loss

      $$P_{sw} = (E_{on} + E_{off}) \cdot f_{sw} = \frac{1}{2} V_{DS} \cdot I_D \cdot (t_{rise} + t_{fall}) \cdot f_{sw}$$

      ## Factors Affecting Switching Loss

      - Gate drive strength: Stronger drive = faster switching = lower loss
      - Parasitic inductance: Causes voltage overshoot, slows transitions
      - Reverse recovery: Diode reverse recovery adds to MOSFET turn-on loss
      - Temperature: Higher temp = slower switching (more loss)

      ## Loss Reduction Techniques

      - Soft switching (ZVS, ZCS): Switch at zero voltage or zero current
      - Snubbers: Slow dV/dt or dI/dt to reduce stress (but add loss elsewhere)
      - Better devices: SiC and GaN have faster switching, lower capacitances
      - Lower frequency: Reduces switching events (but larger passives)

      ## Datasheet Parameters

      Look for $E_{on}$, $E_{off}$, $E_{rr}$ (reverse recovery) in datasheets. These are test-condition specific — scale appropriately for your application.
  synchronous-generator:
    name: Synchronous generator
    notes: |
      **Synchronous generators** (alternators) produce nearly all grid electricity. Rotor spins at synchronous speed, creating rotating magnetic field that induces AC in stator windings.

      **Synchronous speed:**

      $$n_s = \frac{120 \cdot f}{P}$$

      Where $f$ is frequency (Hz) and $P$ is number of poles.

      | Poles | Speed at 50 Hz | Speed at 60 Hz |
      |-------|----------------|----------------|
      | 2 | 3000 RPM | 3600 RPM |
      | 4 | 1500 RPM | 1800 RPM |
      | 6 | 1000 RPM | 1200 RPM |

      **Equivalent circuit per phase:**

      $$E_a = V_t + I_a(R_a + jX_s)$$

      Where:
      - $E_a$ = generated EMF (internal voltage)
      - $V_t$ = terminal voltage
      - $I_a$ = armature current
      - $X_s$ = synchronous reactance (dominates over $R_a$)

      **Power output:**

      $$P = \frac{3 E_a V_t}{X_s} \sin\delta$$

      Where $\delta$ is power angle (load angle) between $E_a$ and $V_t$.

      ![Synchronous generator diagram](https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/Synchronous_machine_rotor.svg/300px-Synchronous_machine_rotor.svg.png)
  thd:
    name: THD
    notes: |
      Total Harmonic Distortion quantifies how much a waveform deviates from a pure sine wave. Critical for power quality and audio applications.

      ## Definition

      $$THD = \frac{\sqrt{\sum_{n=2}^{\infty} V_n^2}}{V_1} \times 100\%$$

      Where $V_1$ is the fundamental (first harmonic) amplitude and $V_n$ are higher harmonic amplitudes.

      Alternatively, THD can be defined relative to total RMS (THD-R):

      $$THD_R = \frac{\sqrt{\sum_{n=2}^{\infty} V_n^2}}{V_{rms}}$$

      ## THD Limits

      | Application | Typical THD Limit |
      |-------------|-------------------|
      | Grid voltage | < 5% |
      | Grid current (IEEE 519) | < 5% |
      | Hi-Fi audio | < 0.1% |
      | Motor drives | < 5% current |

      ## Sources of Harmonics

      - Rectifiers (draw current pulses, not sine)
      - Variable frequency drives
      - Switch-mode power supplies
      - Fluorescent/LED lighting

      ## Effects of Harmonics

      - Transformer overheating (skin effect, eddy currents)
      - Neutral conductor overload in three-phase systems
      - Capacitor overheating and failure
      - Motor torque pulsations and heating
      - Metering errors

      ## Mitigation

      Active filters inject anti-phase harmonics. Passive LC filters tuned to specific harmonics. Multi-pulse rectifiers (12, 18, 24-pulse) cancel certain harmonics.
  thermal-design:
    name: Thermal design
    notes: |
      Thermal management ensures junction temperature stays within safe limits. Poor thermal design leads to reduced reliability, derating, or catastrophic failure.

      ## Thermal Model

      Electrical analogy: Heat flow = current, temperature difference = voltage, thermal resistance = resistance.

      $$T_j = T_a + P_{total} \cdot (R_{th,jc} + R_{th,cs} + R_{th,sa})$$

      Where:
      - $T_j$ = junction temperature
      - $T_a$ = ambient temperature
      - $R_{th,jc}$ = junction-to-case (device property)
      - $R_{th,cs}$ = case-to-sink (interface material)
      - $R_{th,sa}$ = sink-to-ambient (heatsink property)

      ## Maximum Junction Temperature

      Silicon devices: typically 150°C to 175°C max
      SiC devices: up to 200°C
      Derating: Design for 20-30°C margin below max

      ## Thermal Interface Materials

      | Material | Thermal Conductivity | Application |
      |----------|---------------------|-------------|
      | Thermal paste | 0.5-5 W/m·K | General use |
      | Thermal pad | 1-6 W/m·K | Easy assembly |
      | Phase change | 3-5 W/m·K | Better conformity |
      | Solder/direct bond | 20-400 W/m·K | Lowest resistance |

      ## Heatsink Selection

      Required thermal resistance:

      $$R_{th,sa} < \frac{T_{j,max} - T_a}{P_{total}} - R_{th,jc} - R_{th,cs}$$

      Consider forced air cooling if natural convection insufficient. Liquid cooling for very high power density.

      ## Transient Thermal Impedance

      For pulsed loads, thermal capacitance matters. Datasheets provide transient thermal impedance curves ($Z_{th}$ vs pulse width) for calculating peak junction temperature during transients.
  transmission-losses:
    name: Transmission losses
    notes: |
      **Power losses** in transmission lines are primarily $I^2R$ heating in conductors.

      $$P_{loss} = I^2 R = \frac{P^2 R}{V^2 \cos^2\phi}$$

      For fixed power $P$, losses are inversely proportional to voltage squared. **Double the voltage → quarter the losses.**

      **Example calculation:**
      - 100 MW, 100 km, aluminum conductor
      - At 115 kV: ~5% losses
      - At 230 kV: ~1.25% losses
      - At 500 kV: ~0.25% losses

      **Other loss mechanisms:**
      - **Corona**: Ionization at high voltage (wet weather, sharp edges)
      - **Skin effect**: AC crowds to conductor surface, increasing effective R
      - **Dielectric**: Insulator leakage (minimal in dry conditions)

      **Typical transmission efficiencies:**
      | Voltage Level | Typical Loss |
      |--------------|--------------|
      | Distribution (11-33 kV) | 4-8% |
      | Sub-transmission (66-132 kV) | 2-4% |
      | Transmission (220-500 kV) | 1-2% |
      | EHV/UHV (765 kV+) | <1% |

      Grid losses total 5-10% from generation to consumer.
  voltage-levels:
    name: Voltage levels
    notes: |
      **Voltage standardization** - different levels serve different purposes.

      **Why high voltage for transmission:**

      $$P = \sqrt{3} \cdot V_L \cdot I_L \cdot \cos\phi$$

      For same power: Higher V → Lower I → Smaller conductors, less loss.

      **Typical voltage hierarchy (varies by country):**

      | Level | Voltage | Purpose |
      |-------|---------|---------|
      | EHV/UHV | 345-1100 kV | Bulk transmission (100s km) |
      | HV | 115-230 kV | Transmission network |
      | Sub-transmission | 33-69 kV | Regional distribution |
      | Primary distribution | 11-33 kV | Urban/rural feeders |
      | Secondary | 120/240 V or 230/400 V | End consumers |

      **Insulation drives costs:**
      - Higher voltage → larger towers, longer insulators
      - Clearances to ground, between phases increase
      - Transformer costs increase with voltage
      - Economic optimum depends on power and distance

      **DC transmission (HVDC):**
      - No reactive power, no skin effect
      - Fewer conductors (2 vs 3)
      - Expensive converter stations
      - Economic for >500 km overhead or >50 km underwater
